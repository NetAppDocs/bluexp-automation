---
sidebar: sidebar
permalink: cm/api_ref_resources.html
keywords:
summary:
---

= Resources
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
This section describes the API calls available for each resource.


=== Accounts
==== Creates an AWS account.
----
POST /accounts/aws
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#awsaccountrequest[AwsAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awsaccountresponse[AwsAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Nss account by public Id.
----
GET /accounts/nss/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Nss account|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#nssaccountresponse[NssAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing Nss account.
----
PUT /accounts/nss/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Nss account|true|string|
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#nssaccountrequest[NssAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#nssaccountresponse[NssAccountResponse]
|404|Nss Account with the given account id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== get aws cloud account id for the given creds.
----
POST /accounts/aws/validate-creds
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#awsaccountrequest[AwsAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all accounts that are only for cloud (AWS, AZURE, GCP).
----
GET /accounts/cloud-providers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|providerType||false|enum (AWS, AZURE, GCP)|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudprovideraccountresponse[CloudProviderAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing account. It is not possible to delete an account that has working environments attached to it.
----
DELETE /accounts/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of the account to be deleted|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|404|Account with the given account id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves accounts.
----
GET /accounts
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|providerType||false|enum (AWS, AZURE, GCP, NSS)|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudprovideraccountresponse[CloudProviderAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve Gcp Storage account by public Id.
----
GET /accounts/gcp/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Gcp Storage account|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpaccountresponse[GcpAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing Gcp storage account.
----
PUT /accounts/gcp/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Gcp storage account|true|string|
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#gcpstorageaccountrequest[GcpStorageAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#gcpaccountresponse[GcpAccountResponse]
|404|Gcp Storage Account with the given account does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an AWS account by public Id.
----
GET /accounts/aws/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of AWS account|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awsaccountresponse[AwsAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing AWS account.
----
PUT /accounts/aws/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of AWS account|true|string|
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#awsaccountrequest[AwsAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#awsaccountresponse[AwsAccountResponse]
|404|AWS Account with the given account id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Azure account by public Id.
----
GET /accounts/azure/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Azure account|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureaccountresponse[AzureAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing Azure account.
----
PUT /accounts/azure/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Azure account|true|string|
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#azureaccountrequest[AzureAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#azureaccountresponse[AzureAccountResponse]
|404|Azure Account with the given account id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create a Gcp Storage account.
----
POST /accounts/gcp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#gcpstorageaccountrequest[GcpStorageAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpaccountresponse[GcpAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates an Azure account.
----
POST /accounts/azure
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#azureaccountrequest[AzureAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureaccountresponse[AzureAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validate an Azure account request.
----
POST /accounts/azure/validate-creds
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#azureaccountrequest[AzureAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#associatedsubscription[AssociatedSubscription] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a Nss account.
----
POST /accounts/nss
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#nssaccountrequest[NssAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#nssaccountresponse[NssAccountResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== validate gcp account request.
----
POST /accounts/gcp/validate-creds
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#gcpstorageaccountrequest[GcpStorageAccountRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates vsa list of an existing Nss account.
----
PUT /accounts/nss/set-vsa-list/{cloudProviderAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudProviderAccountId|Public Id of Nss account|true|string|
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#nssaccountvsalistrequest[NssAccountVsaListRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#nssaccountresponse[NssAccountResponse]
|404|Nss Account with the given account id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Audit
==== Retrieves the audit group entry for the specific request ID.
----
GET /audit/{requestId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|requestId|Retrieve audit group entries for this request ID|true|string|
|QueryParameter|records|with records|false|boolean|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#auditgroupsummary[AuditGroupSummary] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves timeline filter options for local UI.
----
GET /audit/local/audit/{accountId}/options
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudcentralauditoptionsresponse[CloudCentralAuditOptionsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves audit record for given request id for local UI.
----
GET /audit/local/audit/{accountId}/{service}/{requestId}/records
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|requestId|request ID|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudcentralauditrecordresponse[CloudCentralAuditRecordResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve active task  for this request ID.
----
GET /audit/activeTask/{requestId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|requestId|request ID|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#taskcacheentry[TaskCacheEntry]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves audit group entries optionally filtered by query parameters for local UI.
----
GET /audit/local/audit/{accountId}
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudcentralauditgroupresponse[CloudCentralAuditGroupResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves audit group entries optionally filtered by query parameters.
----
GET /audit
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|limit|Limit entries to specific amount|false|integer (int32)|
|QueryParameter|after|Filter entries after specific date|false|integer (int64)|
|QueryParameter|workingEnvironmentId|Filter entries by working environment public ID|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#auditgroupsummary[AuditGroupSummary] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves audit groups and group records optionally filtered by query parameters.
----
GET /audit/auditserver
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#auditgroupsummary[AuditGroupSummary] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Aws-ha:aggregates
==== Creates a new aggregate
----
POST /aws/ha/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create Aggregate Request|true|link:../cm/api_ref_definitions.html#vsaaggregatecreaterequest[VsaAggregateCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves aggregates
----
GET /aws/ha/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Public Id of working environment|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#aggregateresponse[AggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds disks to an existing aggregate
----
POST /aws/ha/aggregates/{workingEnvironmentId}/{aggregateName}/disks
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be updated|true|string|
|BodyParameter|body|Add disk to aggregate request|true|link:../cm/api_ref_definitions.html#adddiskstoaggregaterequest[AddDisksToAggregateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing aggregate
----
DELETE /aws/ha/aggregates/{workingEnvironmentId}/{aggregateName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Aws-ha:discovery
==== Retrieves a list of discovered working environments visible to the current user in the specified AWS region.
----
GET /aws/ha/discovery/discover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Region to discover working environments|true|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#discoveredawsharesponse[DiscoveredAwsHaResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Saves a previously discovered Cloud Volumes ONTAP working environment to the Cloud Manager database.
----
POST /aws/ha/discovery/recover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#recovervsarequest[RecoverVsaRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Aws-ha:encryption
==== Updates the key manager CA certificate on the Cloud Volumes ONTAP system
----
POST /aws/ha/encryption/{workingEnvironmentId}/update-key-manager-ca-certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Volumes ONTAP key manager CA certificate request parameters|true|link:../cm/api_ref_definitions.html#updatekeymanagercacertificaterequest[UpdateKeyManagerCaCertificateRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates the client certificate on the Cloud Volumes ONTAP system
----
POST /aws/ha/encryption/{workingEnvironmentId}/update-client-certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds a key manager to the Cloud Volumes ONTAP system
----
POST /aws/ha/encryption/{workingEnvironmentId}/key-managers/{keyManagerIp}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|keyManagerIp|Key manager IP address|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes a key manager from the Cloud Volumes ONTAP system
----
DELETE /aws/ha/encryption/{workingEnvironmentId}/key-managers/{keyManagerIp}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|keyManagerIp|Key manager IP address|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Aws-ha:metadata
==== Retrieves VPCs
----
GET /aws/ha/metadata/vpcs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vpcextendedresponse[VpcExtendedResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the minimum number of required IPs for a single Cloud Volumes ONTAP system, an HA node, and HA mediator
----
GET /aws/ha/metadata/network-requirements
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#networkrequirementsresponse[NetworkRequirementsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS user Key Pairs for all regions
----
GET /aws/ha/metadata/key-pairs-by-region
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#keypairsbyregionresponse[KeyPairsByRegionResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS user Key Pairs for specific region
----
GET /aws/ha/metadata/key-pairs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all the Tag names
----
GET /aws/ha/metadata/tag-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tagkeyresponse[TagKeyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported capacity tiers for EBS volume types
----
GET /aws/ha/metadata/supported-capacity-tiers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedcapacitytiers[SupportedCapacityTiers]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves packages configuration
----
GET /aws/ha/metadata/packages
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#packageinforesponse[PackageInfoResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves default snapshot policies available on a cluster
----
GET /aws/ha/metadata/default-snapshot-policies
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Manager manifests. Refer to the API Developers Guide in order to understand how to extract valid region codes, license types, instance types and Cloud Volumes ONTAP version parameters for the creation of a Cloud Volumes ONTAP working environment.
----
GET /aws/ha/metadata/manifests
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#metadataresponse[MetadataResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS encryption keys for specific region
----
GET /aws/ha/metadata/aws-encryption-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awsencryptionkey[AwsEncryptionKey] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all S3 buckets
----
GET /aws/ha/metadata/buckets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|tagsRequired||false|boolean|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3bucketinfo[S3BucketInfo] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Volumes ONTAP configurations.
----
GET /aws/ha/metadata/permutations
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Filter by region|false|string|
|QueryParameter|version|Filter by version|false|string|
|QueryParameter|license|Filter by license|false|string|
|QueryParameter|instance_type|Filter by instance type|false|string|
|QueryParameter|default_instance_type|Filter by default instance type|false|string|
|QueryParameter|feature|Filter by feature|false|string|
|QueryParameter|latest_only|Filter latest only|false|string|
|QueryParameter|ami|Filter by ami id|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configuration[Configuration] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves route tables per vpc and their subnet associations.
----
GET /aws/ha/metadata/route-tables
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|vpcId||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#routetableresponse[RouteTableResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create new S3 bucket
----
POST /aws/ha/metadata/create-bucket
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|bucketName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all S3 buckets with additional info
----
GET /aws/ha/metadata/get-buckets-details
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3bucketssummary[S3BucketsSummary]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS instance profiles
----
GET /aws/ha/metadata/instance-profiles
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instanceprofileresponse[InstanceProfileResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves instance types not supporting acceleration and capacity tiering
----
GET /aws/ha/metadata/instance-types-not-supporting-acceleration-and-capacity-tiering
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instancetypesnotsupportingaccelerationandcapacitytieringresponse[InstanceTypesNotSupportingAccelerationAndCapacityTieringResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported features
----
GET /aws/ha/metadata/supported-features
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedfeaturesresponse[SupportedFeaturesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported EBS volume types
----
GET /aws/ha/metadata/ebs-volume-types
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ebsvolumetype[EbsVolumeType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS regions over which an Cloud Volumes ONTAP working environment may be created
----
GET /aws/ha/metadata/regions
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#region[Region] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve S3 buckets policy status and tiering level
----
POST /aws/ha/metadata/get-buckets-application-info
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Request for retrieving Buckets Additional info|true|link:../cm/api_ref_definitions.html#bucketspolicyandtieringinforequest[BucketsPolicyAndTieringInfoRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#bucketadditionaldata[BucketAdditionalData] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validate HA floating IPs.
----
POST /aws/ha/metadata/validate-floating-ips
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Validate HA floating IPs request|true|link:../cm/api_ref_definitions.html#awshafloatingipvalidationdata[AwsHaFloatingIpValidationData]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awshafloatingipvalidationresponse[AwsHaFloatingIpValidationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates the current user is subscribed to Cloud Volumes ONTAP product in Amazon marketplace
----
POST /aws/ha/metadata/validate-subscribed-to-ontap-cloud
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Validate subscribed to Cloud Volumes ONTAP request|true|link:../cm/api_ref_definitions.html#awsvalidatesubscribedtoontapcloudrequest[AwsValidateSubscribedToOntapCloudRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awsvalidatesubscribedtoontapcloudresponse[AwsValidateSubscribedToOntapCloudResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve S3 buckets summary
----
GET /aws/ha/metadata/s3-summary
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3summary[S3Summary]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Aws-ha:volumes
==== Retrieves volumes for Backup Activation.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /aws/ha/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change underlying volume tier.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/change-tier
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#changevolumetierrequest[ChangeVolumeTierRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add ISCSI initiator.
----
POST /aws/ha/volumes/initiator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|ISCSI initiator request|true|link:../cm/api_ref_definitions.html#initiator[Initiator]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all ISCSI initiators.
----
GET /aws/ha/volumes/initiator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initiatorentry[InitiatorEntry] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new volume. If the properties aggregateName and maxNumOfDisksApprovedToAdd are not filled in, then the response will fail with a suggested aggregate name and the number of disks that will need to be created in order to fulfill the request.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|createAggregateIfNotFound|On create volume request, allow creating not-found aggregate|false|boolean|
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#vsavolumecreaterequest[VsaVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /aws/ha/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all igroups.
----
GET /aws/ha/volumes/igroups/{workingEnvironmentId}/{svmName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#igroup[IGroup] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Move an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/move
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumemoverequest[VolumeMoveRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Quotes a new volume. Returns a resource quote needed to satisfy the requested volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/volumes/quote
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Quote volume request|true|link:../cm/api_ref_definitions.html#vsavolumequoterequest[VsaVolumeQuoteRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsavolumequoteresponse[VsaVolumeQuoteResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#volumemodifyrequest[VolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /aws/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Aws-ha:working-environments
==== Register extra capacity license
----
POST /aws/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity licenses(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get extra capacity licenses for cvo
----
GET /aws/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity license
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity license(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file content on the provided Cloud Volumes ONTAP
----
POST /aws/ha/working-environments/{workingEnvironmentId}/upload-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|license file content request|true|link:../cm/api_ref_definitions.html#licensefilecontent[LicenseFileContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate FPolicy for ransomeware files
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/activate-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Disable FPolicy for ransomeware files
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/disable-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the net port broadcast domain mtu of the Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/networkOptimization
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Use optimization|true|link:../cm/api_ref_definitions.html#changenetworkoptimizationrequest[ChangeNetworkOptimizationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup NTP server
----
POST /aws/ha/working-environments/{workingEnvironmentId}/ntp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|NTP Configuration request|true|link:../cm/api_ref_definitions.html#ntpconfigurationrequest[NTPConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves editable tags for cloud resources of a given Cloud Volumes ONTAP instance
----
GET /aws/ha/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#usertagsresponse[UserTagsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify user tags for cloud resources of a given Cloud Volumes ONTAP instance
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Modify user tags request|true|link:../cm/api_ref_definitions.html#modifyusertagsrequest[ModifyUserTagsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves images already installed on the Cloud Volumes ONTAP
----
GET /aws/ha/working-environments/{workingEnvironmentId}/ontap-available-images
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updatelocalimage[UpdateLocalImage] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an HA Cloud Volumes ONTAP working environment.
----
GET /aws/ha/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing Cloud Volumes ONTAP working environment, including all Cloud resources created for this working environment (unless the localDelete flag is set to true)
----
DELETE /aws/ha/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|localDelete|If true, the Cloud Volumes ONTAP instance is not terminated in Cloud, but Cloud Manager no longer manages the working environment.|false|boolean|false
|QueryParameter|forceDelete|If true, the working environment will be deleted even if it is part of one or more SnapMirror relationships.|false|boolean|false
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity serials
----
POST /aws/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|licenses serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity serials
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete extra capacity licenses by serials
----
DELETE /aws/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change tier level
----
POST /aws/ha/working-environments/{workingEnvironmentId}/change-tier-level
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change tier level request|true|link:../cm/api_ref_definitions.html#changetierlevelrequest[ChangeTierLevelRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Stops a specific Cloud Volumes ONTAP instance
----
POST /aws/ha/working-environments/{workingEnvironmentId}/stop
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|takeSnapshots|Take snapshots before stopping Cloud Volumes ONTAP|true|boolean|true
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS using workgroup configuration to an existing Cloud Volumes ONTAP working environment
----
POST /aws/ha/working-environments/{workingEnvironmentId}/cifs-workgroup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsworkgroupconfigurationrequest[CIFSWorkgroupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the svm name of the Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Svm name modification request|true|link:../cm/api_ref_definitions.html#svmnamemodificationrequest[SvmNameModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates default vscan file operation profile. Profile on existing CIFS shares will change only on writes-only mode
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/vscan-file-op
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Vscan file-operation Request|true|link:../cm/api_ref_definitions.html#vscanfileoprequest[VscanFileOpRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Starts a specific Cloud Volumes ONTAP instance
----
POST /aws/ha/working-environments/{workingEnvironmentId}/start
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Checks for the presence of non-persistent locks held on CIFs Sessions.
----
GET /aws/ha/working-environments/{workingEnvironmentId}/cifs-locks-exist
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|boolean
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate snapshot policy assignment to all not protected rw volumes
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/activate-snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of versions to which this Cloud Volumes ONTAP can be upgraded
----
GET /aws/ha/working-environments/{workingEnvironmentId}/occm-provided-upgrade-versions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ontapupdateimagemetadata[OntapUpdateImageMetadata] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Ontap Saving
----
GET /aws/ha/working-environments/{workingEnvironmentId}/ontap-saving
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentontapsavingresponse[WorkingEnvironmentOntapSavingResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates mediator of the specified Cloud Volumes ONTAP with the given version.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /aws/ha/working-environments/{workingEnvironmentId}/update-mediator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
POST /aws/ha/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
GET /aws/ha/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Cost And Usage
----
GET /aws/ha/working-environments/{workingEnvironmentId}/cost-and-usage
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|start|cost and usage start period|false|string|
|QueryParameter|end|cost and usage end period|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentcostandusageresponse[WorkingEnvironmentCostAndUsageResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the writing speed for Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/writing-speed
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Writing speed request|true|link:../cm/api_ref_definitions.html#writingspeedrequest[WritingSpeedRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate offbox configuration
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/offbox
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs a complete image update operation on the single node of the specified Cloud Volumes ONTAP
----
POST /aws/ha/working-environments/{workingEnvironmentId}/update-image
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update system image request|true|link:../cm/api_ref_definitions.html#updatesystemimagerequest[UpdateSystemImageRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password of a specific Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete CIFS Configuration of an existing Cloud Volumes ONTAP working environment
----
POST /aws/ha/working-environments/{workingEnvironmentId}/delete-cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsdeleterequest[CIFSDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot policy
----
POST /aws/ha/working-environments/{workingEnvironmentId}/snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body|Create snapshot policy request|true|link:../cm/api_ref_definitions.html#snapshotpolicycreaterequest[SnapshotPolicyCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Manually triggers subscription sync for all Cloud Volumes ONTAP working environments
----
POST /aws/ha/working-environments/sync-subscription
----

===== Consumes

* application/json

===== Produces

* application/json

==== Change serial number of Cloud Volumes ONTAP
----
POST /aws/ha/working-environments/{workingEnvironmentId}/change-serial
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change serial number request|true|link:../cm/api_ref_definitions.html#changeserialnumberrequest[ChangeSerialNumberRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates the route tables of an HA Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/route-tables
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#updateroutetablesrequest[UpdateRouteTablesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete FPolicy for ransomeware files
----
DELETE /aws/ha/working-environments/{workingEnvironmentId}/fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all license types and their associated instance types for a given Cloud Volumes ONTAP instance
----
GET /aws/ha/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#licenseandinstancetype[LicenseAndInstanceType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the instance type of a specific Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Instance type modification request|true|link:../cm/api_ref_definitions.html#licenseandinstancetypemodificationrequest[LicenseAndInstanceTypeModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new AWS HA Cloud Volumes ONTAP working environment.
----
POST /aws/ha/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#createawshaworkingenvironmentrequest[CreateAwsHaWorkingEnvironmentRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List start-stop schedules for Cloud Volumes ONTAP
----
GET /aws/ha/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaschedule[VsaSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Set schedules for Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Cloud Volumes ONTAP working environment update schedule request|true|link:../cm/api_ref_definitions.html#vsaschedulesrequest[VsaSchedulesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the cluster password of a specific Cloud Volumes ONTAP
----
PUT /aws/ha/working-environments/{workingEnvironmentId}/set-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|occmOnly||false|boolean|
|BodyParameter|body|Set password request|true|link:../cm/api_ref_definitions.html#passwordwrapper[PasswordWrapper]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file on the provided Cloud Volumes ONTAP
----
POST /aws/ha/working-environments/{workingEnvironmentId}/upload-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Retrieves action parameters used in create request of a given Cloud Volumes ONTAP instance
----
GET /aws/ha/working-environments/{workingEnvironmentId}/create-request-parameters
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#createrequestparametersresponse[CreateRequestParametersResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves eligibility support status of a Cloud Volumes ONTAP system. Valid values - NSS_NOT_VALID, NOT_REGISTERED, IPA_PROBLEM, VALID, NSS_NOT_EXISTS, LICENSE_EXPIRED
----
GET /aws/ha/working-environments/{workingEnvironmentId}/update-eligibility
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#eligibilityresponse[EligibilityResponse]
|400|Working Environment must be ON or UPDATING in order to check eligibility|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Enable capacity tiering
----
POST /aws/ha/working-environments/{workingEnvironmentId}/enable-capacity-tiering
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Enable capacity tiering request|false|link:../cm/api_ref_definitions.html#enablecapacitytieringrequest[EnableCapacityTieringRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Parses an uploaded Cloud license file
----
POST /aws/ha/working-environments/parse-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providedlicenseresponse[ProvidedLicenseResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Registers a Cloud Volumes ONTAP system with NetApp
----
POST /aws/ha/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|nssAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the support registration status of a Cloud Volumes ONTAP system
----
GET /aws/ha/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-ha:aggregates
==== Creates a new aggregate
----
POST /azure/ha/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create Aggregate Request|true|link:../cm/api_ref_definitions.html#vsaaggregatecreaterequest[VsaAggregateCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves aggregates
----
GET /azure/ha/aggregates/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#aggregateresponse[AggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing aggregate
----
DELETE /azure/ha/aggregates/{workingEnvironmentId}/{aggregateName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds disks to an existing aggregate
----
POST /azure/ha/aggregates/{workingEnvironmentId}/{aggregateName}/disks
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be updated|true|string|
|BodyParameter|body|Add disk to aggregate request|true|link:../cm/api_ref_definitions.html#adddiskstoaggregaterequest[AddDisksToAggregateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-ha:discovery
==== Retrieves a list of discovered working environments visible to the current user in the specified Azure region.
----
GET /azure/ha/discovery/discover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Region to discover working environments|true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#discoveredazureharesponse[DiscoveredAzureHaResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Saves a previously discovered Cloud Volumes ONTAP working environment to the Cloud Manager database.
----
POST /azure/ha/discovery/recover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#recoverazureharequest[RecoverAzureHARequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-ha:metadata
==== Retrieves Network Extended Info
----
GET /azure/ha/metadata/vnets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurenetworkextendedresponse[AzureNetworkExtendedResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all the Tag names
----
GET /azure/ha/metadata/tag-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tagkeyresponse[TagKeyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all vaults
----
GET /azure/ha/metadata/vaults
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|QueryParameter|region||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurekeyvault[AzureKeyVault] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create new blob container
----
POST /azure/ha/metadata/create-container
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create blob container request|true|link:../cm/api_ref_definitions.html#createblobcontainerrequest[CreateBlobContainerRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported capacity tiers for Azure disk types
----
GET /azure/ha/metadata/supported-capacity-tiers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedcapacitytiers[SupportedCapacityTiers]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all blob containers
----
GET /azure/ha/metadata/containers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|QueryParameter|resourceGroupName||true|string|
|QueryParameter|storageAccountName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureblobcontainer[AzureBlobContainer] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves associated subscriptions
----
GET /azure/ha/metadata/associated-subscriptions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#associatedsubscription[AssociatedSubscription] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all keys in a vault
----
GET /azure/ha/metadata/keys-vault
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|QueryParameter|resourceGroupName||true|string|
|QueryParameter|vaultName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurekey[AzureKey] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Azure regions over which an Cloud Volumes ONTAP working environment may be created
----
GET /azure/ha/metadata/regions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureregionresponse[AzureRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves instance types not supporting acceleration and capacity tiering
----
GET /azure/ha/metadata/instance-types-not-supporting-acceleration-and-capacity-tiering
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instancetypesnotsupportingaccelerationandcapacitytieringresponse[InstanceTypesNotSupportingAccelerationAndCapacityTieringResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates the current user is subscribed to Cloud Volumes ONTAP product in Azure marketplace
----
POST /azure/ha/metadata/validate-subscribed-to-ontap-cloud
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Validate subscribed to Cloud Volumes ONTAP request|true|link:../cm/api_ref_definitions.html#azurevalidatesubscribedtoontapcloudrequest[AzureValidateSubscribedToOntapCloudRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevalidatesubscribedtoontapcloudresponse[AzureValidateSubscribedToOntapCloudResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Azure resource groups by region
----
GET /azure/ha/metadata/resource-groups
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureresourcegroupbyregionresponse[AzureResourceGroupByRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Azure availability zones by region
----
GET /azure/ha/metadata/availability-zones
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureavailabilityzoneresponse[AzureAvailabilityZoneResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves default snapshot policies available on a cluster
----
GET /azure/ha/metadata/default-snapshot-policies
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all ONTAP Cloud configurations.
----
GET /azure/ha/metadata/permutations
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Filter by region|false|string|
|QueryParameter|version|Filter by version|false|string|
|QueryParameter|license|Filter by license|false|string|
|QueryParameter|instance_type|Filter by instance type|false|string|
|QueryParameter|default_instance_type|Filter by default instance type|false|string|
|QueryParameter|feature|Filter by feature|false|string|
|QueryParameter|latest_only|Filter latest only|false|string|
|QueryParameter|marketplace_version|Filter by marketplace version|false|string|
|QueryParameter|marketplace_sku|Filter by marketplace sku|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configuration[Configuration] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the minimum number of required IPs for a Cloud Volumes ONTAP system
----
GET /azure/ha/metadata/network-requirements
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurenetworkrequirementsresponse[AzureNetworkRequirementsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported Azure storage account types
----
GET /azure/ha/metadata/storage-account-types
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurestorageaccounttyperesponse[AzureStorageAccountTypeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported features
----
GET /azure/ha/metadata/supported-features
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedfeaturesresponse[SupportedFeaturesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves packages configuration
----
GET /azure/ha/metadata/packages
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#packageinforesponse[PackageInfoResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-ha:volumes
==== Add ISCSI initiator.
----
POST /azure/ha/volumes/initiator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|ISCSI initiator request|true|link:../cm/api_ref_definitions.html#initiator[Initiator]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all ISCSI initiators.
----
GET /azure/ha/volumes/initiator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initiatorentry[InitiatorEntry] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change underlying volume tier.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/change-tier
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#changevolumetierrequest[ChangeVolumeTierRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes for Backup Activation.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /azure/ha/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Move an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/move
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumemoverequest[VolumeMoveRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all igroups.
----
GET /azure/ha/volumes/igroups/{workingEnvironmentId}/{svmName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#igroup[IGroup] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#volumemodifyrequest[VolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new volume. If the properties aggregateName and maxNumOfDisksApprovedToAdd are not filled in, then the response will fail with a suggested aggregate name and the number of disks that will need to be created in order to fulfill the request.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/ha/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|createAggregateIfNotFound|On create volume request, allow creating not-found aggregate|false|boolean|
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#vsavolumecreaterequest[VsaVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /azure/ha/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Quotes a new volume. Returns a resource quote needed to satisfy the requested volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/ha/volumes/quote
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Quote volume request|true|link:../cm/api_ref_definitions.html#vsavolumequoterequest[VsaVolumeQuoteRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsavolumequoteresponse[VsaVolumeQuoteResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /azure/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-ha:working-environments
==== Manually triggers subscription sync for all Cloud Volumes ONTAP working environments
----
POST /azure/ha/working-environments/sync-subscription
----

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot policy
----
POST /azure/ha/working-environments/{workingEnvironmentId}/snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body|Create snapshot policy request|true|link:../cm/api_ref_definitions.html#snapshotpolicycreaterequest[SnapshotPolicyCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup NTP server
----
POST /azure/ha/working-environments/{workingEnvironmentId}/ntp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|NTP Configuration request|true|link:../cm/api_ref_definitions.html#ntpconfigurationrequest[NTPConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List start-stop schedules for Cloud Volumes ONTAP
----
GET /azure/ha/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaschedule[VsaSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Set schedules for Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Cloud Volumes ONTAP working environment update schedule request|true|link:../cm/api_ref_definitions.html#vsaschedulesrequest[VsaSchedulesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the svm name of the Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Svm name modification request|true|link:../cm/api_ref_definitions.html#svmnamemodificationrequest[SvmNameModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change tier level
----
POST /azure/ha/working-environments/{workingEnvironmentId}/change-tier-level
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change tier level request|true|link:../cm/api_ref_definitions.html#changetierlevelrequest[ChangeTierLevelRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS using workgroup configuration to an existing Cloud Volumes ONTAP working environment
----
POST /azure/ha/working-environments/{workingEnvironmentId}/cifs-workgroup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsworkgroupconfigurationrequest[CIFSWorkgroupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Checks for the presence of non-persistent locks held on CIFs Sessions.
----
GET /azure/ha/working-environments/{workingEnvironmentId}/cifs-locks-exist
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|boolean
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Starts a specific Cloud Volumes ONTAP instance
----
POST /azure/ha/working-environments/{workingEnvironmentId}/start
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates default vscan file operation profile. Profile on existing CIFS shares will change only on writes-only mode
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/vscan-file-op
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Vscan file-operation Request|true|link:../cm/api_ref_definitions.html#vscanfileoprequest[VscanFileOpRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete CIFS Configuration of an existing Cloud Volumes ONTAP working environment
----
POST /azure/ha/working-environments/{workingEnvironmentId}/delete-cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsdeleterequest[CIFSDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Returns true if a resource group with that name already exists, false otherwise
----
GET /azure/ha/working-environments/resource-group-exists/{resourceGroupName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|resourceGroupName|resource group name|true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|boolean
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Stops a specific Cloud Volumes ONTAP instance
----
POST /azure/ha/working-environments/{workingEnvironmentId}/stop
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|takeSnapshots|Take snapshots before stopping Cloud Volumes ONTAP|true|boolean|true
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Enable capacity tiering
----
POST /azure/ha/working-environments/{workingEnvironmentId}/enable-capacity-tiering
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Enable capacity tiering request|false|link:../cm/api_ref_definitions.html#enablecapacitytieringrequest[EnableCapacityTieringRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of versions to which this Cloud Volumes ONTAP can be upgraded
----
GET /azure/ha/working-environments/{workingEnvironmentId}/occm-provided-upgrade-versions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ontapupdateimagemetadata[OntapUpdateImageMetadata] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Disable FPolicy for ransomeware files
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/disable-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves images already installed on the Cloud Volumes ONTAP
----
GET /azure/ha/working-environments/{workingEnvironmentId}/ontap-available-images
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updatelocalimage[UpdateLocalImage] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new Azure HA Cloud Volumes ONTAP working environment.
----
POST /azure/ha/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#createazurevsaworkingenvironmentrequest[CreateAzureVSAWorkingEnvironmentRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Cloud Volumes ONTAP working environments visible to the currently logged in user
----
GET /azure/ha/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|tenantId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate snapshot policy assignment to all not protected rw volumes
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/activate-snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves number of available ip addresses in the Cloud Volumes ONTAP working environment's subnet
----
GET /azure/ha/working-environments/{workingEnvironmentId}/available-ips-in-subnet
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#availableipsresponse[AvailableIpsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the writing speed for Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/writing-speed
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Writing speed request|true|link:../cm/api_ref_definitions.html#writingspeedrequest[WritingSpeedRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves editable tags for cloud resources of a given Cloud Volumes ONTAP instance
----
GET /azure/ha/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#usertagsresponse[UserTagsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify user tags for cloud resources of a given Cloud Volumes ONTAP instance
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Modify user tags request|true|link:../cm/api_ref_definitions.html#modifyusertagsrequest[ModifyUserTagsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity serials
----
POST /azure/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|licenses serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity serials
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete extra capacity licenses by serials
----
DELETE /azure/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity license
----
POST /azure/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity licenses(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get extra capacity licenses for cvo
----
GET /azure/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity license
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity license(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs a complete image update operation on the single node of the specified Cloud Volumes ONTAP
----
POST /azure/ha/working-environments/{workingEnvironmentId}/update-image
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update system image request|true|link:../cm/api_ref_definitions.html#updatesystemimagerequest[UpdateSystemImageRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change serial number of Cloud Volumes ONTAP
----
POST /azure/ha/working-environments/{workingEnvironmentId}/change-serial
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change serial number request|true|link:../cm/api_ref_definitions.html#changeserialnumberrequest[ChangeSerialNumberRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
POST /azure/ha/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
GET /azure/ha/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Cloud Volumes ONTAP working environment
----
GET /azure/ha/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing Cloud Volumes ONTAP working environment, including all Cloud resources created for this working environment (unless the localDelete flag is set to true)
----
DELETE /azure/ha/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|localDelete|If true, the Cloud Volumes ONTAP instance is not terminated in Cloud, but Cloud Manager no longer manages the working environment.|false|boolean|false
|QueryParameter|forceDelete|If true, the working environment will be deleted even if it is part of one or more SnapMirror relationships.|false|boolean|false
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file content on the provided Cloud Volumes ONTAP
----
POST /azure/ha/working-environments/{workingEnvironmentId}/upload-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|license file content request|true|link:../cm/api_ref_definitions.html#licensefilecontent[LicenseFileContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves eligibility support status of a Cloud Volumes ONTAP system. Valid values - NSS_NOT_VALID, NOT_REGISTERED, IPA_PROBLEM, VALID, NSS_NOT_EXISTS, LICENSE_EXPIRED
----
GET /azure/ha/working-environments/{workingEnvironmentId}/update-eligibility
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#eligibilityresponse[EligibilityResponse]
|400|Working Environment must be ON or UPDATING in order to check eligibility|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Parses an uploaded Cloud license file
----
POST /azure/ha/working-environments/parse-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providedlicenseresponse[ProvidedLicenseResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Delete FPolicy for ransomeware files
----
DELETE /azure/ha/working-environments/{workingEnvironmentId}/fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Ontap Saving
----
GET /azure/ha/working-environments/{workingEnvironmentId}/ontap-saving
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentontapsavingresponse[WorkingEnvironmentOntapSavingResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Registers a Cloud Volumes ONTAP system with NetApp
----
POST /azure/ha/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|nssAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the support registration status of a Cloud Volumes ONTAP system
----
GET /azure/ha/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate FPolicy for ransomeware files
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/activate-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Cost And Usage
----
GET /azure/ha/working-environments/{workingEnvironmentId}/cost-and-usage
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|start|cost and usage start period|false|string|
|QueryParameter|end|cost and usage end period|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentcostandusageresponse[WorkingEnvironmentCostAndUsageResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the net port broadcast domain mtu of the Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/networkOptimization
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Use optimization|true|link:../cm/api_ref_definitions.html#changenetworkoptimizationrequest[ChangeNetworkOptimizationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the cluster password of a specific Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/set-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|occmOnly||false|boolean|
|BodyParameter|body|Set password request|true|link:../cm/api_ref_definitions.html#passwordwrapper[PasswordWrapper]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password of a specific Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves action parameters used in create request of a given Cloud Volumes ONTAP instance
----
GET /azure/ha/working-environments/{workingEnvironmentId}/create-request-parameters
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#createrequestparametersresponse[CreateRequestParametersResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate offbox configuration
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/offbox
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all license types and their associated instance types for a given Cloud Volumes ONTAP instance
----
GET /azure/ha/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#licenseandinstancetype[LicenseAndInstanceType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the instance type of a specific Cloud Volumes ONTAP
----
PUT /azure/ha/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Instance type modification request|true|link:../cm/api_ref_definitions.html#licenseandinstancetypemodificationrequest[LicenseAndInstanceTypeModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file on the provided Cloud Volumes ONTAP
----
POST /azure/ha/working-environments/{workingEnvironmentId}/upload-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

=== Azure-vsa:aggregates
==== Retrieves aggregates.Operation may only be performed on working environments whose status is: ON, INITIALIZING, DEGRADED
----
GET /azure/vsa/aggregates/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#aggregateresponse[AggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds disks to an existing aggregate
----
POST /azure/vsa/aggregates/{workingEnvironmentId}/{aggregateName}/disks
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be updated|true|string|
|BodyParameter|body|Add disk to aggregate request|true|link:../cm/api_ref_definitions.html#adddiskstoaggregaterequest[AddDisksToAggregateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new aggregate
----
POST /azure/vsa/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create Aggregate Request|true|link:../cm/api_ref_definitions.html#vsaaggregatecreaterequest[VsaAggregateCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing aggregate
----
DELETE /azure/vsa/aggregates/{workingEnvironmentId}/{aggregateName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-vsa:discovery
==== Retrieves a list of discovered working environments visible to the current user in the specified Azure region.
----
GET /azure/vsa/discover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Region to discover working environments|true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#discoveredazurevsaresponse[DiscoveredAzureVSAResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Saves a previously discovered Cloud Volumes ONTAP working environment to the Cloud Manager database.
----
POST /azure/vsa/recover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#recoverazurevsarequest[RecoverAzureVSARequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-vsa:metadata
==== Retrieve all vaults.
----
GET /azure/vsa/metadata/vaults
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|QueryParameter|region||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurekeyvault[AzureKeyVault] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported capacity tiers for Azure disk types.
----
GET /azure/vsa/metadata/supported-capacity-tiers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedcapacitytiers[SupportedCapacityTiers]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all blob containers.
----
GET /azure/vsa/metadata/containers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|QueryParameter|resourceGroupName||true|string|
|QueryParameter|storageAccountName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureblobcontainer[AzureBlobContainer] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Azure resource groups by region.
----
GET /azure/vsa/metadata/resource-groups
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureresourcegroupbyregionresponse[AzureResourceGroupByRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates the current user is subscribed to Cloud Volumes ONTAP product in Azure marketplace.
----
POST /azure/vsa/metadata/validate-subscribed-to-ontap-cloud
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Validate subscribed to Cloud Volumes ONTAP request|true|link:../cm/api_ref_definitions.html#azurevalidatesubscribedtoontapcloudrequest[AzureValidateSubscribedToOntapCloudRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevalidatesubscribedtoontapcloudresponse[AzureValidateSubscribedToOntapCloudResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all keys in a vault.
----
GET /azure/vsa/metadata/keys-vault
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|QueryParameter|resourceGroupName||true|string|
|QueryParameter|vaultName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurekey[AzureKey] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves associated subscriptions.
----
GET /azure/vsa/metadata/associated-subscriptions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#associatedsubscription[AssociatedSubscription] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Volumes ONTAP configurations.
----
GET /azure/vsa/metadata/permutations
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Filter by region|false|string|
|QueryParameter|version|Filter by version|false|string|
|QueryParameter|license|Filter by license|false|string|
|QueryParameter|instance_type|Filter by instance type|false|string|
|QueryParameter|default_instance_type|Filter by default instance type|false|string|
|QueryParameter|feature|Filter by feature|false|string|
|QueryParameter|latest_only|Filter latest only|false|string|
|QueryParameter|marketplace_version|Filter by marketplace version|false|string|
|QueryParameter|marketplace_sku|Filter by marketplace sku|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configuration[Configuration] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Azure availability zones by region.
----
GET /azure/vsa/metadata/availability-zones
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureavailabilityzoneresponse[AzureAvailabilityZoneResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Network Extended Info.
----
GET /azure/vsa/metadata/vnets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurenetworkextendedresponse[AzureNetworkExtendedResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves packages configuration
----
GET /azure/vsa/metadata/packages
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#packageinforesponse[PackageInfoResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported features
----
GET /azure/vsa/metadata/supported-features
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedfeaturesresponse[SupportedFeaturesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Azure regions over which an Cloud Volumes ONTAP working environment may be created.
----
GET /azure/vsa/metadata/regions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azureregionresponse[AzureRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the minimum number of required IPs for a Cloud Volumes ONTAP system.
----
GET /azure/vsa/metadata/network-requirements
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurenetworkrequirementsresponse[AzureNetworkRequirementsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves instance types not supporting acceleration and capacity tiering
----
GET /azure/vsa/metadata/instance-types-not-supporting-acceleration-and-capacity-tiering
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instancetypesnotsupportingaccelerationandcapacitytieringresponse[InstanceTypesNotSupportingAccelerationAndCapacityTieringResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all the Tag names.
----
GET /azure/vsa/metadata/tag-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tagkeyresponse[TagKeyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported Azure storage account types.
----
GET /azure/vsa/metadata/storage-account-types
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurestorageaccounttyperesponse[AzureStorageAccountTypeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create new blob container.
----
POST /azure/vsa/metadata/create-container
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create blob container request|true|link:../cm/api_ref_definitions.html#createblobcontainerrequest[CreateBlobContainerRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves default snapshot policies available on a cluster
----
GET /azure/vsa/metadata/default-snapshot-policies
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-vsa:volumes
==== Return a list of snapshot descriptions for the volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Move an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/move
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumemoverequest[VolumeMoveRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes for Backup Activation.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /azure/vsa/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Quotes a new volume. Returns a resource quote needed to satisfy the requested volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/vsa/volumes/quote
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Quote volume request|true|link:../cm/api_ref_definitions.html#vsavolumequoterequest[VsaVolumeQuoteRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsavolumequoteresponse[VsaVolumeQuoteResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#volumemodifyrequest[VolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new volume. If the properties aggregateName and maxNumOfDisksApprovedToAdd are not filled in, then the response will fail with a suggested aggregate name and the number of disks that will need to be created in order to fulfill the request.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/vsa/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|createAggregateIfNotFound|On create volume request, allow creating not-found aggregate|false|boolean|
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#vsavolumecreaterequest[VsaVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /azure/vsa/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add ISCSI initiator.
----
POST /azure/vsa/volumes/initiator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|ISCSI initiator request|true|link:../cm/api_ref_definitions.html#initiator[Initiator]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all ISCSI initiators.
----
GET /azure/vsa/volumes/initiator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initiatorentry[InitiatorEntry] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all igroups.
----
GET /azure/vsa/volumes/igroups/{workingEnvironmentId}/{svmName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#igroup[IGroup] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change underlying volume tier.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /azure/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/change-tier
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#changevolumetierrequest[ChangeVolumeTierRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Azure-vsa:working-environments
==== Creates a new Cloud Volumes ONTAP working environment.
----
POST /azure/vsa/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#createazurevsaworkingenvironmentrequest[CreateAzureVSAWorkingEnvironmentRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Cloud Volumes ONTAP working environments visible to the currently logged in user
----
GET /azure/vsa/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|tenantId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Ontap Saving
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/ontap-saving
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentontapsavingresponse[WorkingEnvironmentOntapSavingResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Stops a specific Cloud Volumes ONTAP instance
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/stop
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|takeSnapshots|Take snapshots before stopping Cloud Volumes ONTAP|true|boolean|true
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file on the provided Cloud Volumes ONTAP
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/upload-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Register extra capacity license
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity licenses(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get extra capacity licenses for cvo
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity license
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity license(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all license types and their associated instance types for a given Cloud Volumes ONTAP instance
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#licenseandinstancetype[LicenseAndInstanceType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the instance type of a specific Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Instance type modification request|true|link:../cm/api_ref_definitions.html#licenseandinstancetypemodificationrequest[LicenseAndInstanceTypeModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot policy
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body|Create snapshot policy request|true|link:../cm/api_ref_definitions.html#snapshotpolicycreaterequest[SnapshotPolicyCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Registers a Cloud Volumes ONTAP system with NetApp
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|nssAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the support registration status of a Cloud Volumes ONTAP system
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Disable FPolicy for ransomeware files
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/disable-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of versions to which this Cloud Volumes ONTAP can be upgraded
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/occm-provided-upgrade-versions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ontapupdateimagemetadata[OntapUpdateImageMetadata] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates default vscan file operation profile. Profile on existing CIFS shares will change only on writes-only mode
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/vscan-file-op
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Vscan file-operation Request|true|link:../cm/api_ref_definitions.html#vscanfileoprequest[VscanFileOpRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the cluster password of a specific Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/set-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|occmOnly||false|boolean|
|BodyParameter|body|Set password request|true|link:../cm/api_ref_definitions.html#passwordwrapper[PasswordWrapper]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Returns true if a resource group with that name already exists, false otherwise
----
GET /azure/vsa/working-environments/resource-group-exists/{resourceGroupName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|resourceGroupName|resource group name|true|string|
|QueryParameter|subscriptionId||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|boolean
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves action parameters used in create request of a given Cloud Volumes ONTAP instance
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/create-request-parameters
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#createrequestparametersresponse[CreateRequestParametersResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete FPolicy for ransomeware files
----
DELETE /azure/vsa/working-environments/{workingEnvironmentId}/fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate FPolicy for ransomeware files
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/activate-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity serials
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|licenses serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity serials
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete extra capacity licenses by serials
----
DELETE /azure/vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup NTP server
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/ntp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|NTP Configuration request|true|link:../cm/api_ref_definitions.html#ntpconfigurationrequest[NTPConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the writing speed for Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/writing-speed
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Writing speed request|true|link:../cm/api_ref_definitions.html#writingspeedrequest[WritingSpeedRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete CIFS Configuration of an existing Cloud Volumes ONTAP working environment
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/delete-cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsdeleterequest[CIFSDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate offbox configuration
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/offbox
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Enable capacity tiering
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/enable-capacity-tiering
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Enable capacity tiering request|false|link:../cm/api_ref_definitions.html#enablecapacitytieringrequest[EnableCapacityTieringRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves images already installed on the Cloud Volumes ONTAP
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/ontap-available-images
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updatelocalimage[UpdateLocalImage] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Manually triggers subscription sync for all Cloud Volumes ONTAP working environments
----
POST /azure/vsa/working-environments/sync-subscription
----

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves eligibility support status of a Cloud Volumes ONTAP system. Valid values - NSS_NOT_VALID, NOT_REGISTERED, IPA_PROBLEM, VALID, NSS_NOT_EXISTS, LICENSE_EXPIRED
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/update-eligibility
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#eligibilityresponse[EligibilityResponse]
|400|Working Environment must be ON or UPDATING in order to check eligibility|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password of a specific Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change tier level
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/change-tier-level
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change tier level request|true|link:../cm/api_ref_definitions.html#changetierlevelrequest[ChangeTierLevelRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Starts a specific Cloud Volumes ONTAP instance
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/start
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change serial number of Cloud Volumes ONTAP
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/change-serial
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change serial number request|true|link:../cm/api_ref_definitions.html#changeserialnumberrequest[ChangeSerialNumberRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List start-stop schedules for Cloud Volumes ONTAP
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaschedule[VsaSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Set schedules for Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Cloud Volumes ONTAP working environment update schedule request|true|link:../cm/api_ref_definitions.html#vsaschedulesrequest[VsaSchedulesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Cloud Volumes ONTAP working environment
----
GET /azure/vsa/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#azurevsaworkingenvironmentresponse[AzureVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing Cloud Volumes ONTAP working environment, including all Cloud resources created for this working environment (unless the localDelete flag is set to true)
----
DELETE /azure/vsa/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|localDelete|If true, the Cloud Volumes ONTAP instance is not terminated in Cloud, but Cloud Manager no longer manages the working environment.|false|boolean|false
|QueryParameter|forceDelete|If true, the working environment will be deleted even if it is part of one or more SnapMirror relationships.|false|boolean|false
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate snapshot policy assignment to all not protected rw volumes
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/activate-snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Cost And Usage
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/cost-and-usage
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|start|cost and usage start period|false|string|
|QueryParameter|end|cost and usage end period|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentcostandusageresponse[WorkingEnvironmentCostAndUsageResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS using workgroup configuration to an existing Cloud Volumes ONTAP working environment
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/cifs-workgroup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsworkgroupconfigurationrequest[CIFSWorkgroupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file content on the provided Cloud Volumes ONTAP
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/upload-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|license file content request|true|link:../cm/api_ref_definitions.html#licensefilecontent[LicenseFileContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the svm name of the Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Svm name modification request|true|link:../cm/api_ref_definitions.html#svmnamemodificationrequest[SvmNameModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Parses an uploaded Cloud license file
----
POST /azure/vsa/working-environments/parse-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providedlicenseresponse[ProvidedLicenseResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Performs a complete image update operation on the single node of the specified Cloud Volumes ONTAP
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/update-image
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update system image request|true|link:../cm/api_ref_definitions.html#updatesystemimagerequest[UpdateSystemImageRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves number of available ip addresses in the Cloud Volumes ONTAP working environment's subnet
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/available-ips-in-subnet
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#availableipsresponse[AvailableIpsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
POST /azure/vsa/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the net port broadcast domain mtu of the Cloud Volumes ONTAP
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/networkOptimization
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Use optimization|true|link:../cm/api_ref_definitions.html#changenetworkoptimizationrequest[ChangeNetworkOptimizationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves editable tags for cloud resources of a given Cloud Volumes ONTAP instance
----
GET /azure/vsa/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#usertagsresponse[UserTagsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify user tags for cloud resources of a given Cloud Volumes ONTAP instance
----
PUT /azure/vsa/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Modify user tags request|true|link:../cm/api_ref_definitions.html#modifyusertagsrequest[ModifyUserTagsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Cloud-compliance
==== Retrieve Cloud Compliance info.
----
GET /cloud-compliance/info
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudcomplianceinforesponse[CloudComplianceInfoResponse]
|===

===== Produces

* application/json

==== Disable scan.
----
POST /cloud-compliance/{serviceId}/disable-service-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|serviceId|Service ID|true|enum (ANF, S3)|
|===

===== Produces

* application/json

==== Disable scan.
----
POST /cloud-compliance/{workingEnvironmentId}/disable-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Produces

* application/json

==== Deploy Cloud Compliance instance by working environments.
----
POST /cloud-compliance/deploy-by-working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|deploy Cloud Compliance request|true|link:../cm/api_ref_definitions.html#createcloudcompliancebywesrequest[CreateCloudComplianceByWesRequest]|
|===

===== Produces

* application/json

==== Enable scan.
----
POST /cloud-compliance/{workingEnvironmentId}/enable-onprem-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of onprem working environment|true|string|
|===

===== Produces

* application/json

==== Enable scan.
----
POST /cloud-compliance/{workingEnvironmentId}/enable-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Produces

* application/json

==== Retrieve service Cloud Compliance status.
----
GET /cloud-compliance/fsx/{fileSystemId}/compliance-status
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System ID|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudcompliancestatusresponse[CloudComplianceStatusResponse]
|===

===== Produces

* application/json

==== Enable scan.
----
POST /cloud-compliance/{serviceId}/enable-service-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|serviceId|Service ID|true|enum (ANF, S3)|
|BodyParameter|body|Enable Cloud Compliance request|false|link:../cm/api_ref_definitions.html#enableservicescanrequest[EnableServiceScanRequest]|
|===

===== Produces

* application/json

==== Retrieve service Cloud Compliance status.
----
GET /cloud-compliance/{serviceId}/compliance-status
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|serviceId|Service ID|true|enum (ANF, S3)|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cloudcompliancestatusresponse[CloudComplianceStatusResponse]
|===

===== Produces

* application/json

==== Disable onprem scan.
----
POST /cloud-compliance/{workingEnvironmentId}/disable-onprem-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of onprem working environment|true|string|
|===

===== Produces

* application/json

==== Enable scan.
----
POST /cloud-compliance/fsx/{fileSystemId}/enable-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System ID|true|string|
|===

===== Produces

* application/json

==== Disable scan.
----
POST /cloud-compliance/fsx/{fileSystemId}/disable-scan
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System ID|true|string|
|===

===== Produces

* application/json

=== Cloudsync
==== Retrieve all S3 buckets.
----
GET /cloudsync/buckets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|userId|User ID of the working environment creator|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3bucketinfo[S3BucketInfo] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List S3 bucket's sub directories.
----
GET /cloudsync/buckets/{bucketName}/sub-directories
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|userId|User ID of the working environment creator|true|string|
|QueryParameter|fullPath|Full path to list sub directories|false|string|
|PathParameter|bucketName|Bucket name to get sub directories from|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#bucketinformation[BucketInformation]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get Cloud Sync Service url, according to the current environment.
----
GET /cloudsync/service-url
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#serviceurl[ServiceUrl]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS user Key Pairs for working environment's account and region.
----
GET /cloudsync/key-pairs-by-vsa/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create sync of OnPrem working environment with Cloud Sync service.Operation may only be performed on working environments whose status is: ON
----
POST /cloudsync/sync/onprem/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of OnPrem working environment|true|string|
|BodyParameter|body|Create sync request|true|link:../cm/api_ref_definitions.html#createsyncrequest[CreateSyncRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete sync of OnPrem working environment to Cloud Sync service.Operation may only be performed on working environments whose status is: ON
----
DELETE /cloudsync/sync/onprem/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of OnPrem working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create sync of VSA working environment with Cloud Sync service.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /cloudsync/sync/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|BodyParameter|body|Create sync request|true|link:../cm/api_ref_definitions.html#createsyncrequest[CreateSyncRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete sync of VSA working environment to Cloud Sync service.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /cloudsync/sync/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List S3 bucket's sub directories in working environment's account.
----
GET /cloudsync/buckets/{bucketName}/sub-directories/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|QueryParameter|fullPath|Full path to list sub directories|false|string|
|PathParameter|bucketName|Bucket name to get sub directories from|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#bucketinformation[BucketInformation]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all S3 buckets in working environment's account.
----
GET /cloudsync/buckets/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3bucketinfo[S3BucketInfo] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add Cloud Sync relationship to an OnPrem volume.Operation may only be performed on working environments whose status is: ON
----
POST /cloudsync/relationship/onprem/{workingEnvironmentId}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of OnPrem working environment|true|string|
|PathParameter|volumeName||true|ref|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete Cloud Sync relationship from an OnPrem volume.Operation may only be performed on working environments whose status is: ON
----
DELETE /cloudsync/relationship/onprem/{workingEnvironmentId}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of OnPrem working environment|true|string|
|PathParameter|volumeName||true|ref|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add Cloud Sync relationship to a VSA volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /cloudsync/relationship/{workingEnvironmentId}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|PathParameter|volumeName||true|ref|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete Cloud Sync relationship from a VSA volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /cloudsync/relationship/{workingEnvironmentId}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|PathParameter|volumeName||true|ref|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves VPCs for working environment's account and region.
----
GET /cloudsync/vpcs-by-vsa/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of VSA working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vpcextendedresponse[VpcExtendedResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Filesystem
==== Register OCCM in StoutBroker.
----
POST /aws/filesystem/register-occm
----

===== Consumes

* application/json

===== Produces

* application/json

==== List available software versions, both CVO and mediator.
----
GET /aws/filesystem/software-versions
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#softwareversionsresponse[SoftwareVersionsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Configure S3 bucket name and prefix destination for metrics uploading.
----
POST /aws/filesystem/s3-config
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#configures3request[ConfigureS3Request]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List region to AMI mapping for software version.
----
GET /aws/filesystem/software-metadata/{version}/ami
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|version|version|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#softwareversionamisresponse[SoftwareVersionAmisResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify region to AMI mapping for software version.
----
PUT /aws/filesystem/software-metadata/{version}/ami
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|version|version|true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#modifymappingrequest[ModifyMappingRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new SVM on AWS HA Cloud Volumes ONTAP filesystem.Operation may only be performed on working environments whose status is: ON
----
POST /aws/filesystem/ha/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#createsvmharequest[CreateSvmHaRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add supported instance types for software version.
----
PUT /aws/filesystem/software-metadata/{version}/instance-types
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|version|version|true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#addinstancetypesrequest[AddInstanceTypesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new AWS HA Cloud Volumes ONTAP filesystem.
----
POST /aws/filesystem/ha
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#createfilesystemrequest[CreateFilesystemRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add supported AWS regions.
----
PUT /aws/filesystem/software-metadata/regions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#addawsregionsrequest[AddAwsRegionsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Fsx:volumes
==== Creates a new volume.
----
POST /fsx/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#fsxvolumecreaterequest[FsxVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.
----
GET /fsx/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fileSystemId|Filter volumes by this file system|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.
----
POST /fsx/volumes/{fileSystemId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Name of volume to be cloned|true|string|
|BodyParameter|body|Clone volume request|true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume.
----
GET /fsx/volumes/{fileSystemId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Filter snapshot descriptions for specified volume|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume.
----
PUT /fsx/volumes/{fileSystemId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Name of volume to be modified|true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#fsxvolumemodifyrequest[FsxVolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.
----
DELETE /fsx/volumes/{fileSystemId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Name of volume to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.
----
POST /fsx/volumes/{fileSystemId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.
----
DELETE /fsx/volumes/{fileSystemId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Delete snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Fsx:working-environments
==== Setup a new CIFS Configuration for existing FSx working environment.
----
POST /fsx/working-environments/{fileSystemId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration for existing FSx working environment.
----
GET /fsx/working-environments/{fileSystemId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves SVM list for existing FSx working environment.
----
GET /fsx/working-environments/{fileSystemId}/svms
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#svm[Svm] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve snapshot policies for existing FSx working environment.
----
GET /fsx/working-environments/{fileSystemId}/snapshot-policies
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|fileSystemId|File System Id|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validate provided credentials for existing FSx working environment.
----
POST /fsx/working-environments/validate-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|FSx credentials|true|link:../cm/api_ref_definitions.html#zapicredentials[ZapiCredentials]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#fsxcredentialsstatusresponse[FsxCredentialsStatusResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-ha:aggregates
==== Deletes an existing aggregate
----
DELETE /gcp/ha/aggregates/{workingEnvironmentId}/{aggregateName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds disks to an existing aggregate
----
POST /gcp/ha/aggregates/{workingEnvironmentId}/{aggregateName}/disks
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be updated|true|string|
|BodyParameter|body|Add disk to aggregate request|true|link:../cm/api_ref_definitions.html#adddiskstoaggregaterequest[AddDisksToAggregateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new aggregate
----
POST /gcp/ha/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create Aggregate Request|true|link:../cm/api_ref_definitions.html#vsaaggregatecreaterequest[VsaAggregateCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves aggregates
----
GET /gcp/ha/aggregates/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#aggregateresponse[AggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-ha:discovery
==== Saves a previously discovered Cloud Volumes ONTAP working environment to the Cloud Manager database.
----
POST /gcp/ha/discovery/recover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#recovergcpharequest[RecoverGcpHaRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of discovered working environments visible to the current user in the specified Gcp region.
----
GET /gcp/ha/discovery/discover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Region to discover working environments|true|string|
|QueryParameter|project|Project to discover working environments|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#discoveredgcpharesponse[DiscoveredGcpHaResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-ha:metadata
==== Retrieves supported features
----
GET /gcp/ha/metadata/supported-features
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedfeaturesresponse[SupportedFeaturesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves GCP networks and subnetworks over which an Cloud Volumes ONTAP working environment may be created.
----
GET /gcp/ha/metadata/vpcs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|project||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpconnectivityresponse[GcpConnectivityResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the minimum number of required IPs for a Cloud Volumes ONTAP system
----
GET /gcp/ha/metadata/network-requirements
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpnetworkrequirementsresponse[GcpNetworkRequirementsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves GCP encryption keys for specific region
----
GET /gcp/ha/metadata/gcp-encryption-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|project||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpencryptionkey[GcpEncryptionKey] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all the Labels in the given project Id and region.
----
GET /gcp/ha/metadata/tag-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|projectId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tagkeyresponse[TagKeyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves list of Service Accounts from the project
----
GET /gcp/ha/metadata/service-accounts
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|project||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpserviceaccountsresponse[GcpServiceAccountsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves list of Projects that the caller has permission on
----
GET /gcp/ha/metadata/projects
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpprojectsresponse[GcpProjectsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves packages configuration
----
GET /gcp/ha/metadata/packages
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#packageinforesponse[PackageInfoResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves GCP regions over which an Cloud Volumes ONTAP working environment may be created
----
GET /gcp/ha/metadata/regions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|project||false|string|
|QueryParameter|fields||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpregionresponse[GcpRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all cloud storage buckets
----
GET /gcp/ha/metadata/buckets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|projectId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpbucket[GcpBucket] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves GCP regions and zones over which an Cloud Volumes ONTAP working environment may be created.
----
GET /gcp/ha/metadata/zones
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|project||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpzonesandregionresponse[GcpZonesAndRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Volumes ONTAP configurations.
----
GET /gcp/ha/metadata/permutations
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Filter by region|false|string|
|QueryParameter|version|Filter by version|false|string|
|QueryParameter|license|Filter by license|false|string|
|QueryParameter|machine_type|Filter by machine type|false|string|
|QueryParameter|latest_only|Filter latest only|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configuration[Configuration] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported disk types
----
GET /gcp/ha/metadata/gcp-disk-types
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpdisktyperesponse[GcpDiskTypeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves default snapshot policies available on a cluster
----
GET /gcp/ha/metadata/default-snapshot-policies
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create new bucket
----
POST /gcp/ha/metadata/create-bucket
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create new bucket request|true|link:../cm/api_ref_definitions.html#createbucketrequest[CreateBucketRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves instance types not supporting acceleration and capacity tiering
----
GET /gcp/ha/metadata/instance-types-not-supporting-acceleration-and-capacity-tiering
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instancetypesnotsupportingaccelerationandcapacitytieringresponse[InstanceTypesNotSupportingAccelerationAndCapacityTieringResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported capacity tiers for gcp disk types
----
GET /gcp/ha/metadata/supported-capacity-tiers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedcapacitytiers[SupportedCapacityTiers]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-ha:volumes
==== Move an existing volume
----
POST /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/move
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumemoverequest[VolumeMoveRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new volume. If the properties aggregateName and maxNumOfDisksApprovedToAdd are not filled in, then the response will fail with a suggested aggregate name and the number of disks that will need to be created in order to fulfill the request
----
POST /gcp/ha/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|createAggregateIfNotFound|On create volume request, allow creating not-found aggregate|false|boolean|
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#vsavolumecreaterequest[VsaVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes
----
GET /gcp/ha/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Quotes a new volume. Returns a resource quote needed to satisfy the requested volume
----
POST /gcp/ha/volumes/quote
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Quote volume request|true|link:../cm/api_ref_definitions.html#vsavolumequoterequest[VsaVolumeQuoteRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsavolumequoteresponse[VsaVolumeQuoteResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all igroups
----
GET /gcp/ha/volumes/igroups/{workingEnvironmentId}/{svmName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#igroup[IGroup] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume
----
POST /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes for Backup Activation
----
GET /gcp/ha/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change underlying volume tier
----
POST /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/change-tier
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#changevolumetierrequest[ChangeVolumeTierRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually
----
POST /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually
----
DELETE /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add ISCSI initiator
----
POST /gcp/ha/volumes/initiator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|ISCSI initiator request|true|link:../cm/api_ref_definitions.html#initiator[Initiator]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all ISCSI initiators
----
GET /gcp/ha/volumes/initiator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initiatorentry[InitiatorEntry] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume
----
PUT /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#volumemodifyrequest[VolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume
----
DELETE /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume
----
GET /gcp/ha/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-ha:working-environments
==== Activate snapshot policy assignment to all not protected rw volumes
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/activate-snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs a complete image update operation on the single node of the specified Cloud Volumes ONTAP
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/update-image
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update system image request|true|link:../cm/api_ref_definitions.html#updatesystemimagerequest[UpdateSystemImageRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Cost And Usage
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/cost-and-usage
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|start|cost and usage start period|false|string|
|QueryParameter|end|cost and usage end period|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentcostandusageresponse[WorkingEnvironmentCostAndUsageResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of versions to which this Cloud Volumes ONTAP can be upgraded
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/occm-provided-upgrade-versions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ontapupdateimagemetadata[OntapUpdateImageMetadata] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Cloud Volumes ONTAP working environment
----
GET /gcp/ha/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing Cloud Volumes ONTAP working environment, including all Cloud resources created for this working environment (unless the localDelete flag is set to true)
----
DELETE /gcp/ha/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|localDelete|If true, the Cloud Volumes ONTAP instance is not terminated in Cloud, but Cloud Manager no longer manages the working environment.|false|boolean|false
|QueryParameter|forceDelete|If true, the working environment will be deleted even if it is part of one or more SnapMirror relationships.|false|boolean|false
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new Cloud Volumes ONTAP GCP HA working environment.
----
POST /gcp/ha/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#creategcpvsaworkingenvironmentrequest[CreateGcpVsaWorkingEnvironmentRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Cloud Volumes ONTAP working environments visible to the currently logged in user
----
GET /gcp/ha/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|tenantId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete FPolicy for ransomeware files
----
DELETE /gcp/ha/working-environments/{workingEnvironmentId}/fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the net port broadcast domain mtu of the Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/networkOptimization
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Use optimization|true|link:../cm/api_ref_definitions.html#changenetworkoptimizationrequest[ChangeNetworkOptimizationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Starts a specific Cloud Volumes ONTAP instance
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/start
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List start-stop schedules for Cloud Volumes ONTAP
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaschedule[VsaSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Set schedules for Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Cloud Volumes ONTAP working environment update schedule request|true|link:../cm/api_ref_definitions.html#vsaschedulesrequest[VsaSchedulesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change tier level
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/change-tier-level
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change tier level request|true|link:../cm/api_ref_definitions.html#changetierlevelrequest[ChangeTierLevelRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup NTP server
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/ntp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|NTP Configuration request|true|link:../cm/api_ref_definitions.html#ntpconfigurationrequest[NTPConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Parses an uploaded Cloud license file
----
POST /gcp/ha/working-environments/parse-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providedlicenseresponse[ProvidedLicenseResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Register extra capacity serials
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|licenses serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity serials
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete extra capacity licenses by serials
----
DELETE /gcp/ha/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Disable FPolicy for ransomeware files
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/disable-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete CIFS Configuration of an existing Cloud Volumes ONTAP working environment
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/delete-cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsdeleterequest[CIFSDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Ontap Saving
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/ontap-saving
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentontapsavingresponse[WorkingEnvironmentOntapSavingResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves images already installed on the Cloud Volumes ONTAP
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/ontap-available-images
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updatelocalimage[UpdateLocalImage] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file content on the provided Cloud Volumes ONTAP
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/upload-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|license file content request|true|link:../cm/api_ref_definitions.html#licensefilecontent[LicenseFileContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Registers a Cloud Volumes ONTAP system with NetApp
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|nssAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the support registration status of a Cloud Volumes ONTAP system
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change serial number of Cloud Volumes ONTAP
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/change-serial
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change serial number request|true|link:../cm/api_ref_definitions.html#changeserialnumberrequest[ChangeSerialNumberRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Stops a specific Cloud Volumes ONTAP instance
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/stop
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|takeSnapshots|Take snapshots before stopping Cloud Volumes ONTAP|true|boolean|true
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the writing speed for Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/writing-speed
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Writing speed request|true|link:../cm/api_ref_definitions.html#writingspeedrequest[WritingSpeedRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity license
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity licenses(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get extra capacity licenses for cvo
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity license
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity license(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot policy
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body|Create snapshot policy request|true|link:../cm/api_ref_definitions.html#snapshotpolicycreaterequest[SnapshotPolicyCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the svm name of the Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Svm name modification request|true|link:../cm/api_ref_definitions.html#svmnamemodificationrequest[SvmNameModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves eligibility support status of a Cloud Volumes ONTAP system. Valid values - NSS_NOT_VALID, NOT_REGISTERED, IPA_PROBLEM, VALID, NSS_NOT_EXISTS, LICENSE_EXPIRED
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/update-eligibility
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#eligibilityresponse[EligibilityResponse]
|400|Working Environment must be ON or UPDATING in order to check eligibility|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates default vscan file operation profile. Profile on existing CIFS shares will change only on writes-only mode
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/vscan-file-op
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Vscan file-operation Request|true|link:../cm/api_ref_definitions.html#vscanfileoprequest[VscanFileOpRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Enable capacity tiering
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/enable-capacity-tiering
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Enable capacity tiering request|false|link:../cm/api_ref_definitions.html#enablecapacitytieringrequest[EnableCapacityTieringRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the cluster password of a specific Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/set-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|occmOnly||false|boolean|
|BodyParameter|body|Set password request|true|link:../cm/api_ref_definitions.html#passwordwrapper[PasswordWrapper]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file on the provided Cloud Volumes ONTAP
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/upload-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Retrieves editable tags for cloud resources of a given Cloud Volumes ONTAP instance
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#usertagsresponse[UserTagsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify user tags for cloud resources of a given Cloud Volumes ONTAP instance
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Modify user tags request|true|link:../cm/api_ref_definitions.html#modifyusertagsrequest[ModifyUserTagsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate offbox configuration
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/offbox
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Manually triggers subscription sync for all Cloud Volumes ONTAP working environments
----
POST /gcp/ha/working-environments/sync-subscription
----

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves action parameters used in create request of a given Cloud Volumes ONTAP instance
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/create-request-parameters
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#createrequestparametersresponse[CreateRequestParametersResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password of a specific Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate FPolicy for ransomeware files
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/activate-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS using workgroup configuration to an existing Cloud Volumes ONTAP working environment
----
POST /gcp/ha/working-environments/{workingEnvironmentId}/cifs-workgroup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsworkgroupconfigurationrequest[CIFSWorkgroupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Checks for the presence of non-persistent locks held on CIFs Sessions.
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/cifs-locks-exist
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|boolean
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all license types and their associated instance types for a given Cloud Volumes ONTAP instance
----
GET /gcp/ha/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#licenseandinstancetype[LicenseAndInstanceType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the instance type of a specific Cloud Volumes ONTAP
----
PUT /gcp/ha/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Instance type modification request|true|link:../cm/api_ref_definitions.html#licenseandinstancetypemodificationrequest[LicenseAndInstanceTypeModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-vsa:aggregates
==== Creates a new aggregate
----
POST /gcp/vsa/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create Aggregate Request|true|link:../cm/api_ref_definitions.html#vsaaggregatecreaterequest[VsaAggregateCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing aggregate
----
DELETE /gcp/vsa/aggregates/{workingEnvironmentId}/{aggregateName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds disks to an existing aggregate
----
POST /gcp/vsa/aggregates/{workingEnvironmentId}/{aggregateName}/disks
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be updated|true|string|
|BodyParameter|body|Add disk to aggregate request|true|link:../cm/api_ref_definitions.html#adddiskstoaggregaterequest[AddDisksToAggregateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves aggregates.Operation may only be performed on working environments whose status is: ON, INITIALIZING, DEGRADED
----
GET /gcp/vsa/aggregates/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#aggregateresponse[AggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-vsa:discovery
==== Retrieves a list of discovered working environments visible to the current user in the specified Gcp zone.
----
GET /gcp/vsa/discover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Region to discover working environments|true|string|
|QueryParameter|project|Project to discover working environments|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#discoveredgcpvsaresponse[DiscoveredGcpVsaResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Saves a previously discovered Cloud Volumes ONTAP working environment to the Cloud Manager database.
----
POST /gcp/vsa/recover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#recovergcpvsarequest[RecoverGcpVsaRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-vsa:metadata
==== Retrieves GCP regions over which an Cloud Volumes ONTAP working environment may be created.
----
GET /gcp/vsa/metadata/regions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|project||false|string|
|QueryParameter|fields||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpregionresponse[GcpRegionResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves list of Service Accounts from the project.
----
GET /gcp/vsa/metadata/service-accounts
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|project||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpserviceaccountsresponse[GcpServiceAccountsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported disk types.
----
GET /gcp/vsa/metadata/gcp-disk-types
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpdisktyperesponse[GcpDiskTypeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves GCP encryption keys for specific region.
----
GET /gcp/vsa/metadata/gcp-encryption-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|project||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpencryptionkey[GcpEncryptionKey] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Volumes ONTAP configurations.
----
GET /gcp/vsa/metadata/permutations
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Filter by region|false|string|
|QueryParameter|version|Filter by version|false|string|
|QueryParameter|license|Filter by license|false|string|
|QueryParameter|machine_type|Filter by machine type|false|string|
|QueryParameter|latest_only|Filter latest only|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configuration[Configuration] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported features
----
GET /gcp/vsa/metadata/supported-features
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedfeaturesresponse[SupportedFeaturesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create new bucket.
----
POST /gcp/vsa/metadata/create-bucket
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create new bucket request|true|link:../cm/api_ref_definitions.html#createbucketrequest[CreateBucketRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves instance types not supporting acceleration and capacity tiering
----
GET /gcp/vsa/metadata/instance-types-not-supporting-acceleration-and-capacity-tiering
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instancetypesnotsupportingaccelerationandcapacitytieringresponse[InstanceTypesNotSupportingAccelerationAndCapacityTieringResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves list of Projects that the caller has permission on.
----
GET /gcp/vsa/metadata/projects
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpprojectsresponse[GcpProjectsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all cloud storage buckets.
----
GET /gcp/vsa/metadata/buckets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|projectId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpbucket[GcpBucket] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported capacity tiers for gcp disk types.
----
GET /gcp/vsa/metadata/supported-capacity-tiers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedcapacitytiers[SupportedCapacityTiers]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all the Labels in the given project Id and zone.
----
GET /gcp/vsa/metadata/tag-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|projectId||true|string|
|QueryParameter|zone||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tagkeyresponse[TagKeyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves default snapshot policies available on a cluster
----
GET /gcp/vsa/metadata/default-snapshot-policies
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the minimum number of required IPs for a Cloud Volumes ONTAP system.
----
GET /gcp/vsa/metadata/network-requirements
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpnetworkrequirementsresponse[GcpNetworkRequirementsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves packages configuration
----
GET /gcp/vsa/metadata/packages
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#packageinforesponse[PackageInfoResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-vsa:volumes
==== Creates a new volume. If the properties aggregateName and maxNumOfDisksApprovedToAdd are not filled in, then the response will fail with a suggested aggregate name and the number of disks that will need to be created in order to fulfill the request.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /gcp/vsa/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|createAggregateIfNotFound|On create volume request, allow creating not-found aggregate|false|boolean|
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#vsavolumecreaterequest[VsaVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /gcp/vsa/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all igroups.
----
GET /gcp/vsa/volumes/igroups/{workingEnvironmentId}/{svmName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#igroup[IGroup] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change underlying volume tier.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/change-tier
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#changevolumetierrequest[ChangeVolumeTierRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Quotes a new volume. Returns a resource quote needed to satisfy the requested volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /gcp/vsa/volumes/quote
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Quote volume request|true|link:../cm/api_ref_definitions.html#vsavolumequoterequest[VsaVolumeQuoteRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsavolumequoteresponse[VsaVolumeQuoteResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#volumemodifyrequest[VolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add ISCSI initiator.
----
POST /gcp/vsa/volumes/initiator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|ISCSI initiator request|true|link:../cm/api_ref_definitions.html#initiator[Initiator]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all ISCSI initiators.
----
GET /gcp/vsa/volumes/initiator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initiatorentry[InitiatorEntry] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Move an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /gcp/vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/move
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumemoverequest[VolumeMoveRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes for Backup Activation.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /gcp/vsa/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Gcp-vsa:working-environments
==== Register extra capacity license
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity licenses(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get extra capacity licenses for cvo
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity license
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity license(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Parses an uploaded Cloud license file
----
POST /gcp/vsa/working-environments/parse-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providedlicenseresponse[ProvidedLicenseResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Setup NTP server
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/ntp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|NTP Configuration request|true|link:../cm/api_ref_definitions.html#ntpconfigurationrequest[NTPConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete CIFS Configuration of an existing Cloud Volumes ONTAP working environment
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/delete-cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsdeleterequest[CIFSDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves editable tags for cloud resources of a given Cloud Volumes ONTAP instance
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#usertagsresponse[UserTagsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify user tags for cloud resources of a given Cloud Volumes ONTAP instance
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Modify user tags request|true|link:../cm/api_ref_definitions.html#modifyusertagsrequest[ModifyUserTagsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file on the provided Cloud Volumes ONTAP
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/upload-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Setup a new CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file content on the provided Cloud Volumes ONTAP
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/upload-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|license file content request|true|link:../cm/api_ref_definitions.html#licensefilecontent[LicenseFileContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the writing speed for Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/writing-speed
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Writing speed request|true|link:../cm/api_ref_definitions.html#writingspeedrequest[WritingSpeedRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity serials
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|licenses serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity serials
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete extra capacity licenses by serials
----
DELETE /gcp/vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete FPolicy for ransomeware files
----
DELETE /gcp/vsa/working-environments/{workingEnvironmentId}/fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Registers a Cloud Volumes ONTAP system with NetApp
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|nssAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the support registration status of a Cloud Volumes ONTAP system
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the net port broadcast domain mtu of the Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/networkOptimization
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Use optimization|true|link:../cm/api_ref_definitions.html#changenetworkoptimizationrequest[ChangeNetworkOptimizationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Cost And Usage
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/cost-and-usage
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|start|cost and usage start period|false|string|
|QueryParameter|end|cost and usage end period|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentcostandusageresponse[WorkingEnvironmentCostAndUsageResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of versions to which this Cloud Volumes ONTAP can be upgraded
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/occm-provided-upgrade-versions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ontapupdateimagemetadata[OntapUpdateImageMetadata] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves images already installed on the Cloud Volumes ONTAP
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/ontap-available-images
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updatelocalimage[UpdateLocalImage] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password of a specific Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List start-stop schedules for Cloud Volumes ONTAP
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaschedule[VsaSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Set schedules for Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Cloud Volumes ONTAP working environment update schedule request|true|link:../cm/api_ref_definitions.html#vsaschedulesrequest[VsaSchedulesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Starts a specific Cloud Volumes ONTAP instance
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/start
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Stops a specific Cloud Volumes ONTAP instance
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/stop
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|takeSnapshots|Take snapshots before stopping Cloud Volumes ONTAP|true|boolean|true
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Enable capacity tiering
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/enable-capacity-tiering
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Enable capacity tiering request|false|link:../cm/api_ref_definitions.html#enablecapacitytieringrequest[EnableCapacityTieringRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves eligibility support status of a Cloud Volumes ONTAP system. Valid values - NSS_NOT_VALID, NOT_REGISTERED, IPA_PROBLEM, VALID, NSS_NOT_EXISTS, LICENSE_EXPIRED
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/update-eligibility
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#eligibilityresponse[EligibilityResponse]
|400|Working Environment must be ON or UPDATING in order to check eligibility|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Disable FPolicy for ransomeware files
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/disable-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the cluster password of a specific Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/set-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|occmOnly||false|boolean|
|BodyParameter|body|Set password request|true|link:../cm/api_ref_definitions.html#passwordwrapper[PasswordWrapper]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Manually triggers subscription sync for all Cloud Volumes ONTAP working environments
----
POST /gcp/vsa/working-environments/sync-subscription
----

===== Consumes

* application/json

===== Produces

* application/json

==== Activate offbox configuration
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/offbox
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs a complete image update operation on the single node of the specified Cloud Volumes ONTAP
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/update-image
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update system image request|true|link:../cm/api_ref_definitions.html#updatesystemimagerequest[UpdateSystemImageRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Cloud Volumes ONTAP working environment.
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing Cloud Volumes ONTAP working environment, including all Cloud resources created for this working environment (unless the localDelete flag is set to true)
----
DELETE /gcp/vsa/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|localDelete|If true, the Cloud Volumes ONTAP instance is not terminated in Cloud, but Cloud Manager no longer manages the working environment.|false|boolean|false
|QueryParameter|forceDelete|If true, the working environment will be deleted even if it is part of one or more SnapMirror relationships.|false|boolean|false
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change serial number of Cloud Volumes ONTAP
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/change-serial
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change serial number request|true|link:../cm/api_ref_definitions.html#changeserialnumberrequest[ChangeSerialNumberRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS using workgroup configuration to an existing Cloud Volumes ONTAP working environment
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/cifs-workgroup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsworkgroupconfigurationrequest[CIFSWorkgroupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all license types and their associated instance types for a given Cloud Volumes ONTAP instance
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#licenseandinstancetype[LicenseAndInstanceType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the instance type of a specific Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Instance type modification request|true|link:../cm/api_ref_definitions.html#licenseandinstancetypemodificationrequest[LicenseAndInstanceTypeModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot policy
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body|Create snapshot policy request|true|link:../cm/api_ref_definitions.html#snapshotpolicycreaterequest[SnapshotPolicyCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate snapshot policy assignment to all not protected rw volumes
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/activate-snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change tier level
----
POST /gcp/vsa/working-environments/{workingEnvironmentId}/change-tier-level
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change tier level request|true|link:../cm/api_ref_definitions.html#changetierlevelrequest[ChangeTierLevelRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate FPolicy for ransomeware files
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/activate-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Ontap Saving
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/ontap-saving
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentontapsavingresponse[WorkingEnvironmentOntapSavingResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the svm name of the Cloud Volumes ONTAP
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Svm name modification request|true|link:../cm/api_ref_definitions.html#svmnamemodificationrequest[SvmNameModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new Cloud Volumes ONTAP working environment.
----
POST /gcp/vsa/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#creategcpvsaworkingenvironmentrequest[CreateGcpVsaWorkingEnvironmentRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Cloud Volumes ONTAP working environments visible to the currently logged in user.
----
GET /gcp/vsa/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|tenantId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#gcpvsaworkingenvironmentresponse[GcpVsaWorkingEnvironmentResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates default vscan file operation profile. Profile on existing CIFS shares will change only on writes-only mode
----
PUT /gcp/vsa/working-environments/{workingEnvironmentId}/vscan-file-op
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Vscan file-operation Request|true|link:../cm/api_ref_definitions.html#vscanfileoprequest[VscanFileOpRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves action parameters used in create request of a given Cloud Volumes ONTAP instance
----
GET /gcp/vsa/working-environments/{workingEnvironmentId}/create-request-parameters
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#createrequestparametersresponse[CreateRequestParametersResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Monitoring
==== Retrieve Monitoring info.
----
GET /monitoring/info
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#monitoringinforesponse[MonitoringInfoResponse]
|===

===== Produces

* application/json

==== Disable monitoring.
----
POST /monitoring/{workingEnvironmentId}/disable-monitoring
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Produces

* application/json

==== Enable monitoring.
----
POST /monitoring/{workingEnvironmentId}/enable-monitoring
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Produces

* application/json

==== Deploy monitoring instance by working environments.
----
POST /monitoring/deploy-by-working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|deploy monitoring request|true|link:../cm/api_ref_definitions.html#enablemonitoringrequest[EnableMonitoringRequest]|
|===

===== Produces

* application/json

=== Occm:asup
==== Downloads a compressed file of all ASUP files from all VSAs.
----
GET /occm/asup/download-ontap-cloud-asups
----

===== Produces

* application/json

==== Downloads Cloud Manager support data.
----
GET /occm/asup/download
----

===== Produces

* application/json

==== Sends Cloud Manager support data to NetApp Support.
----
POST /occm/asup/send
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|serial|occm serial number|false|string|
|===

===== Produces

* application/json

==== Sends Cloud Volumes ONTAP support data to NetApp Support.
----
POST /occm/asup/send-Cot-Asup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|sendToOccm|Send Asup to OCCM|true|boolean|false
|===

===== Produces

* application/json

==== Get Signed URL for Cloud Manager support data.
----
GET /occm/asup/download-signed
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string
|===

===== Produces

* application/json

==== Retrieves the AutoSupport configuration.
----
GET /occm/asup
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#asupconfiguration[AsupConfiguration]
|===

===== Produces

* application/json

==== Updates the AutoSupport configuration.
----
PUT /occm/asup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#asupconfigurationrequest[AsupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sends Cloud Volumes ONTAP performance archive support data to NetApp Support.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /occm/asup/send-Cot-performance-Asup/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Produces

* application/json

=== Occm:config
==== Resets to the default simplicator URI. Internal use only.
----
POST /occm/config/simplicator/reset
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configresponse[ConfigResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Cloud Manager configuration parameters.
----
GET /occm/config
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configvaluesresponse[ConfigValuesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Configures modifiable Cloud Manager parameters.
----
PUT /occm/config
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#configvaluesupdaterequest[ConfigValuesUpdateRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configvaluesresponse[ConfigValuesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the current simplicator URI and status. Internal use only.
----
GET /occm/config/simplicator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configresponse[ConfigResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:encryption:certificate
==== Validates and installs the provided certificate. Successive calls will overwrite any previously installed certificate. The certificate must match a previously generated CSR.
----
POST /occm/encryption/certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|The certificate generated for Cloud Manager|true|link:../cm/api_ref_definitions.html#installcertificatesrequest[InstallCertificatesRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the installed certificate, if one exists.
----
GET /occm/encryption/certificate
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:encryption:csr
==== Generates, stores and returns a certificate signing request (CSR). This CSR can be signed by a CA and then installed in Cloud Manager using /install_certificate. Successive calls will not overwrite previously generated CSRs.
----
POST /occm/encryption/csr
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#csrresponse[CsrResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the most recently generated CSR, if any exists.
----
GET /occm/encryption/csr
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#csrresponse[CsrResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:encryption:key-managers
==== Returns specific key manager by public Id.
----
GET /occm/encryption/key-managers/{keyManagerId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|keyManagerId|Public Id of the key manager|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#keymanagerresponse[KeyManagerResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing key manager.
----
PUT /occm/encryption/key-managers/{keyManagerId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Update key manager request parameters|true|link:../cm/api_ref_definitions.html#keymanagerrequest[KeyManagerRequest]|
|PathParameter|keyManagerId|Public Id of the key manager to be updated|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#keymanagerresponse[KeyManagerResponse]
|404|Key manager with the given id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing key manager.
----
DELETE /occm/encryption/key-managers/{keyManagerId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|keyManagerId|Public Id of the key manager to be deleted|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|404|Key manager with the given id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds a new key manager.
----
POST /occm/encryption/key-managers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create key manager request parameters|true|link:../cm/api_ref_definitions.html#keymanagerrequest[KeyManagerRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#keymanagerresponse[KeyManagerResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all key managers.
----
GET /occm/encryption/key-managers
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#keymanagerresponse[KeyManagerResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:encryption:key-managers-ca-certificates
==== Adds a new key manager CA certificate.
----
POST /occm/encryption/key-managers-ca-certificates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Saves a key manager ca certificate request parameters|true|link:../cm/api_ref_definitions.html#keymanagercacertificaterequest[KeyManagerCaCertificateRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all key managers CA certificates.
----
GET /occm/encryption/key-managers-ca-certificates
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a specific key manager CA certificate.
----
GET /occm/encryption/key-managers-ca-certificates/{keyManagerCaCertificateId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|keyManagerCaCertificateId|Public Id of the key manager ca certificate|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing key manager CA certificate.
----
DELETE /occm/encryption/key-managers-ca-certificates/{keyManagerCaCertificateId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|keyManagerCaCertificateId|Public Id of the key manager ca certificate to be deleted|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|404|Key manager ca certificate with the given ID does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:key-store
==== Generate new key pair and self certificate at key store and return a certificate signing request (CSR). This CSR can be signed by a CA.
----
POST /occm/key-store/external-certificate-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|certificateFilename|Certificate file name|false|string|
|HeaderParameter|privateKeyFilename|Private key file name|false|string|
|HeaderParameter|algorithm|Private key algorithm|false|string|
|BodyParameter|certificate|The CA signed certificate|false|string|
|BodyParameter|privateKey|The private key associated with the CA signed certificate|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Retrieve the self certificate of Cloud Manager key store, if one exists.
----
GET /occm/key-store/self-certificate
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates and installs the provided certificate in trust store.
----
POST /occm/key-store/trusted-certificate-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Trusted certificate file name|false|string|
|BodyParameter|certificate|certificate|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#trustedcertificateresponse[TrustedCertificateResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Validates and installs the provided root CA chain. Successive calls will overwrite any previously installed root CA chain.
----
POST /occm/key-store/signed-certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|The CA signed certificate|true|link:../cm/api_ref_definitions.html#installcertificatesrequest[InstallCertificatesRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve the CA signed certificate of Cloud Manager key store, if one exists.
----
GET /occm/key-store/signed-certificate
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Generate new key pair and self certificate at key store and return a certificate signing request (CSR). This CSR can be signed by a CA.
----
POST /occm/key-store
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#certificatesigningrequest[CertificateSigningRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#csrresponse[CsrResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates and installs the provided root CA chain. Successive calls will overwrite any previously installed root CA chain.
----
POST /occm/key-store/signed-certificate-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Certificate file name|false|string|
|BodyParameter|certificate|The CA signed certificate|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Return existing trusted certificates added by the user from trust store.
----
GET /occm/key-store/user-trusted-certificates
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#trustedcertificateresponse[TrustedCertificateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Generate new key pair and self certificate at key store and return a certificate signing request (CSR). This CSR can be signed by a CA.
----
POST /occm/key-store/external-certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|The CA signed certificate and an associated private key|true|link:../cm/api_ref_definitions.html#installcertificatesandprivatekeyrequest[InstallCertificatesAndPrivateKeyRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete existing trusted certificate from trust store.
----
DELETE /occm/key-store/trusted-certificate/{certificateId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|certificateId|The trusted certificate's ID|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:saas-mp-service
==== Attach Saas subscription to cloud provider account.
----
PUT /occm/saas-mp-service/attach-subscription/{provider}/{cloudAccountId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|cloudAccountId|Public Id of cloud provider account|true|string|
|PathParameter|provider|cloud provider name|true|enum (AWS, AZURE, GCP)|
|BodyParameter|body|Update subscription request|true|link:../cm/api_ref_definitions.html#updatesubscriptionrequest[UpdateSubscriptionRequest]|
|===

===== Produces

* application/json

==== Retrieves current SaaS marketplace account and subscriptions.
----
GET /occm/saas-mp-service/account
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#saasmpaccountresponse[SaasMpAccountResponse]
|===

===== Produces

* application/json

==== Retrieves SaaS marketplace subscriptions for cvo.
----
GET /occm/saas-mp-service/{workingEnvironmentId}/subscription
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#describecvosubscriptionresponse[DescribeCvoSubscriptionResponse]
|===

===== Produces

* application/json

=== Occm:setup
==== Validates that Cloud Manager has an active Internet connection
----
POST /occm/setup/validate/connectivity
----

===== Consumes

* application/json

===== Produces

* application/json

==== Validates a given proxy URL.
----
POST /occm/setup/validate/proxy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Proxy Url|true|link:../cm/api_ref_definitions.html#proxyuri[ProxyUri]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:setup-portal
==== Setup a given proxy URL.
----
POST /occm/setup-portal/proxy/setup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Proxy Url|true|link:../cm/api_ref_definitions.html#setproxyrequest[SetProxyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs initial setup with NetApp Cloud Central.
----
POST /occm/setup-portal/init
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|Authorization||false|string|
|BodyParameter|body|Setup data|true|link:../cm/api_ref_definitions.html#portalsetupasserviceconnectorrequest[PortalSetupAsServiceConnectorRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#initialsetupresponse[InitialSetupResponse]
|400|If setup already performed|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register Cloud Manager to NetApp Cloud Central.
----
POST /occm/setup-portal/register
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#registrationresponse[RegistrationResponse]
|412|Cloud Manager is not configured with NetApp Cloud Central|No Content
|404|Failed Communicating with NetApp Cloud Central|No Content
|409|Cloud Manager is already registered to NetApp Cloud Central|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Complete setup which was pending connectivity.
----
POST /occm/setup-portal/complete-connectivity-pending-setup
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initialsetupresponse[InitialSetupResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs initial standalone setup with local identity provider.
----
POST /occm/setup-portal/init-standalone-local-auth
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|Authorization||false|string|
|BodyParameter|body|Setup data|true|link:../cm/api_ref_definitions.html#localauthsetuprequest[LocalAuthSetupRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#initialsetupresponse[InitialSetupResponse]
|400|If setup already performed|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register Cloud Manager in dark site.
----
POST /occm/setup-portal/register-in-local-auth
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#registrationresponse[RegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates that Cloud Manager has an active Internet connection
----
POST /occm/setup-portal/validate/connectivity
----

===== Consumes

* application/json

===== Produces

* application/json

=== Occm:system
==== Retrieves cloud providers supported regions.
----
GET /occm/system/cloud-provider-regions
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providersupportedregions[ProviderSupportedRegions]
|===

===== Produces

* application/json

==== Checks for a new version of Cloud Manager.
----
GET /occm/system/available-update-versions
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updateinfo[UpdateInfo] array
|===

===== Produces

* application/json

==== Updates Cloud Manager with the given patch. Backup should be provided in multipart/form-data, with the file at a part named 'patch'.
----
POST /occm/system/patch
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename||false|string|
|BodyParameter|patch|patch|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Manually trigger daily notification sending.
----
POST /occm/system/manually-trigger-send-daily-notification
----

===== Produces

* application/json

==== Retrieves Cloud Manager feedback configuration.
----
GET /occm/system/external-config
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#occmexternalconfiguration[OccmExternalConfiguration]
|===

===== Produces

* application/json

==== Manually activate Cloud Volumes ONTAP capacity automatic management cycle.
----
POST /occm/system/manually-activate-auto-vsa-capacity-management-cycle
----

===== Produces

* application/json

==== Performs fetch and cache of Cloud Volumes ONTAP and Cloud Manager version information files from s3.
----
POST /occm/system/cloud-ontap-update-metadata
----

===== Produces

* application/json

==== Retrieves Cloud Manager support services information.
----
GET /occm/system/support-services
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportservices[SupportServices]
|===

===== Produces

* application/json

==== Retrieves the region, VPC, and subnet in which the Cloud Manager instance is running.
----
GET /occm/system/occm-instance-placement
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|clearCache||false|boolean|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instanceplacementresponse[InstancePlacementResponse]
|===

===== Produces

* application/json

==== Updates Cloud Manager to the given version.
----
POST /occm/system/update
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#versionwrapper[VersionWrapper]|
|===

===== Produces

* application/json

==== Performs fetch and processing of Cloud Volumes ONTAP image update metadata files.
----
POST /occm/system/cloud-ontap-update-image-metadata
----

===== Produces

* application/json

==== Retrieves Feature Flags.
----
GET /occm/system/feature-flags
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#featureflag[FeatureFlag]
|===

===== Produces

* application/json

==== Restart server.
----
POST /occm/system/restart-server
----

===== Produces

* application/json

==== Retrieves Cloud Manager server information.
----
GET /occm/system/about
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#about[About]
|===

===== Produces

* application/json

=== Occm:tenancy-service
==== Retrieves workspaces that are visible to the currently logged in user.
----
GET /occm/tenancy-service/workspaces
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workspaceresponse[WorkspaceResponse] array
|===

===== Produces

* application/json

==== Associate Service Connector to workspace.
----
POST /occm/tenancy-service/workspaces/{workspaceId}/associate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workspaceId||true|string|
|===

===== Produces

* application/json

==== Updates current Cloud Manager service user.
----
PUT /occm/tenancy-service/users/update-current-user
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#updateserviceuser[UpdateServiceUser]|
|===

===== Produces

* application/json

=== Onprem:aggregates
==== Retrieves aggregates.
----
GET /onprem/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter aggregates by this working environment|true|string|
|QueryParameter|checkTieringRestrictions|Check tiering restrictions|false|boolean|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#onpremaggregateresponse[OnPremAggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Onprem:metadata
==== Verifies the address and credentials of the given cluster by retrieving the cluster info.
----
GET /onprem/metadata/cluster-info
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|clusterAddress|Cluster address|true|string|
|HeaderParameter|clusterUsername|Cluster username|true|string|
|HeaderParameter|clusterPassword|Cluster password|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#clusterinforesponse[ClusterInfoResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Onprem:volumes
==== Modify an existing volume.Operation may only be performed on working environments whose status is: ON
----
PUT /onprem/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Name of volume to be modified|true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#onpremvolumemodifyrequest[OnPremVolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.Operation may only be performed on working environments whose status is: ON
----
DELETE /onprem/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Name of volume to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Name of volume to be cloned|true|string|
|BodyParameter|body|Clone volume request|true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new volume.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#onpremvolumecreaterequest[OnPremVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.Operation may only be performed on working environments whose status is: ON
----
GET /onprem/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|withMinimumCoolingDays|With minimum cooling days info|false|boolean|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.Operation may only be performed on working environments whose status is: ON
----
DELETE /onprem/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Delete snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes for Backup Activation.Operation may only be performed on working environments whose status is: ON
----
GET /onprem/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume.Operation may only be performed on working environments whose status is: ON
----
GET /onprem/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Filter snapshot descriptions for specified volume|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Onprem:working-environments
==== Setup GCP Backup Cloud to Onprem.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/working-environments/{workingEnvironmentId}/gcp-cloud-backup-setup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|GCP Create object store config request|true|link:../cm/api_ref_definitions.html#gcpcloudbackupsetuprequest[GcpCloudBackupSetupRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Discovers on-premises working environment in Cloud Manager.
----
POST /onprem/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#onpremworkingenvironmentdiscoverrequest[OnPremWorkingEnvironmentDiscoverRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#onpremworkingenvironmentresponse[OnPremWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves on-premises working environments visible to the currently logged in user.
----
GET /onprem/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|tenantId|Public Id of tenant|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#onpremworkingenvironmentresponse[OnPremWorkingEnvironmentResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup AWS Backup Cloud to Onprem.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/working-environments/{workingEnvironmentId}/aws-cloud-backup-setup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|AWS Create object store config request|true|link:../cm/api_ref_definitions.html#awscloudbackupsetuprequest[AwsCloudBackupSetupRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves IP Space List to an existing Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON
----
GET /onprem/working-environments/{workingEnvironmentId}/ip-spaces
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|vserver|Vserver name|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ipspaceresponse[IpSpaceResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an on-premises ONTAP working environment.
----
GET /onprem/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#onpremworkingenvironmentresponse[OnPremWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Cloud Manager will no longer manage this working environment, but will not affect the Data ONTAP itself.
----
DELETE /onprem/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup Azure Backup Cloud to Onprem.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/working-environments/{workingEnvironmentId}/azure-cloud-backup-setup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Azure Create object store config request|true|link:../cm/api_ref_definitions.html#azurecloudbackupsetuprequest[AzureCloudBackupSetupRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON
----
GET /onprem/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|vserver|Vserver name|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup SGWS Backup Cloud to Onprem.Operation may only be performed on working environments whose status is: ON
----
POST /onprem/working-environments/{workingEnvironmentId}/sgws-cloud-backup-setup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|SGWS Create object store config request|true|link:../cm/api_ref_definitions.html#sgwscloudbackupsetuprequest[SgwsCloudBackupSetupRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password for an On Premises working environment.
----
PUT /onprem/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Replication
==== Retrieves SnapMirror replication relationship statuses of a specific working environment.
----
GET /replication/status/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#replicationstatusresponse[ReplicationStatusResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the intercluster LIFs used in a cluster peering relationship.
----
GET /replication/intercluster-lifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|peerWorkingEnvironmentId|Public Id of peer working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#replicationinterclusterlifs[ReplicationInterClusterLifs]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Breaks a SnapMirror replication relationship.
----
POST /replication/break/{destinationWorkingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|destinationWorkingEnvironmentId|Public Id of destination working environment|true|string|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Reversing an existing SnapMirror relationship. This method can only be performed in case the relationship has already been established and is healthy and idle.
----
POST /replication/reverse/{destinationWorkingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|destinationWorkingEnvironmentId|Public Id of the working environment with which the SnapMirror relationship has already been established|true|string|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#sourcesnapmirrorendpoint[SourceSnapmirrorEndpoint]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the status of all SnapMirror relationships.
----
GET /replication/status
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|tenantId|Public Id of tenant|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#replicationstatusresponse[ReplicationStatusResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Initializes an existing SnapMirror relationship. This method can only be performed in case the relationship has already been established and is healthy, yet is idle and uninitialized. For example, if the initial transfer were interrupted, then it can be restarted with this request.
----
POST /replication/initialize/{destinationWorkingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|destinationWorkingEnvironmentId|Public Id of the working environment with which the SnapMirror relationship has already been established|true|string|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves replication schedules of a specific working environment.
----
GET /replication/schedules/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of destination working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#replicationschedule[ReplicationSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new replication to an on-premises working environment.
----
POST /replication/onprem
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#createreplicationrequesttoonprem[CreateReplicationRequestToOnPrem]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates the destination endpoint of the SnapMirror relationship.
----
POST /replication/update/{destinationWorkingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|destinationWorkingEnvironmentId|Public Id of destination working environment|true|string|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new replication to an FSx working environment.
----
POST /replication/fsx
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#createreplicationrequesttofsx[CreateReplicationRequestToFsx]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Resyncs a SnapMirror replication relationship.
----
POST /replication/resync/{destinationWorkingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|destinationWorkingEnvironmentId|Public Id of destination working environment|true|string|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new replication to an Cloud Volumes ONTAP working environment.
----
POST /replication/vsa
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#createreplicationrequesttovsa[CreateReplicationRequestToVsa]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return pairs of relationships.
----
GET /replication/all-relationships
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workspaceId|Public Id of workspaceId|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#allrelationships[AllRelationships]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Removes a replication relationship.
----
DELETE /replication/{destinationWorkingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|destinationWorkingEnvironmentId|Public Id of destination working environment|true|string|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates a SnapMirror replication relationship.
----
PUT /replication/{workingEnvironmentId}/{destinationSvmName}/{destinationVolumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Replication update request|true|link:../cm/api_ref_definitions.html#replicationupdaterequest[ReplicationUpdateRequest]|
|PathParameter|destinationSvmName|Destination SVM name|true|string|
|PathParameter|destinationVolumeName|Destination volume name|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Replication:metadata
==== retrieves SnapMirror policies based on source and destination Cloud Volumes ONTAP.
----
GET /replication/metadata/snapmirror-svm-policies/{sourceWorkingEnvironmentId}/{svmName}/{targetWorkingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|sourceWorkingEnvironmentId|Public Id of source working environment|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|targetWorkingEnvironmentId|Public Id of destination working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapmirrorpolicyresponse[SnapMirrorPolicyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== retrieves SnapMirror policies based on source and destination Cloud Volumes ONTAP.
----
GET /replication/metadata/snapmirror-policies/{sourceWorkingEnvironmentId}/{targetWorkingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|sourceWorkingEnvironmentId|Public Id of source working environment|true|string|
|PathParameter|targetWorkingEnvironmentId|Public Id of destination working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapmirrorpolicyresponse[SnapMirrorPolicyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== return list of snapshot labels from the volume matching labels in the passed list.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /replication/metadata/snapshot-labels/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|svmName|SVM name|true|string|
|PathParameter|volumeName|Volume name|true|string|
|QueryParameter|labels||false|csv string array|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Tenants
==== Creates a new tenant.
----
POST /tenants
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#addtenantrequest[AddTenantRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tenantresponse[TenantResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves tenants that are visible to the currently logged in user.
----
GET /tenants
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tenantresponse[TenantResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a tenant.
----
GET /tenants/{tenantId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|tenantId|Public Id of tenant|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tenantresponse[TenantResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing tenant.
----
PUT /tenants/{tenantId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|tenantId|Public Id of tenant|true|string|
|BodyParameter|body|Tenant update request|true|link:../cm/api_ref_definitions.html#updatetenantrequest[UpdateTenantRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tenantresponse[TenantResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing tenant. It is not possible to delete a tenant over which working environments exist.
----
DELETE /tenants/{tenantId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|tenantId|Public Id of the tenant to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Links an existing tenant to a NetApp Support Site account.
----
PUT /tenants/{tenantId}/nss-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|tenantId|Public Id of the tenant to be updated|true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#setnsskeysrequest[SetNssKeysRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tenantresponse[TenantResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== User-mng:auth
==== Log in to Cloud Manager.
----
POST /auth/login
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#userpasswordrequest[UserPasswordRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|401|Incorrect email/password combination|No Content
|408|Failed Communicating with Active Directory|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Authenticate with local identity provider.
----
POST /auth/local/authenticate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#authrequest[AuthRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves representation of currently logged in user.
----
GET /auth/current-user
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#userresponse[UserResponse]
|401|No user is currently logged in|No Content
|403|No connectivity - SSL Exception|No Content
|409|Setup halted. Internet connectivity required to complete|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Log out of Cloud Manager.
----
POST /auth/logout
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|401|No user is currently logged in|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Changes the password of the currently logged in user.
----
PUT /auth/current-user/change-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Change current user password request parameters|true|link:../cm/api_ref_definitions.html#resetpassword[ResetPassword]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|401|No user is currently logged in|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

=== User-mng:users
==== Retrieves a specific user.
----
GET /users/{userId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|userId|Public Id of user|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#userresponse[UserResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates an existing user.
----
PUT /users/{userId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#updateuserrequest[UpdateUserRequest]|
|PathParameter|userId|Public Id of user|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#userresponse[UserResponse]
|404|User with the given user id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing user. It is not possible to delete a user that has created existing working environments. It is not possible to delete the logged in user.
----
DELETE /users/{userId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|userId|Public Id of the user to be deleted|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|404|User with the given user id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new user.
----
POST /users
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#userrequest[UserRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#userresponse[UserResponse]
|404|Either the provided tenant or role assigned to the new user does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all users visible to the current user.
----
GET /users
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#userresponse[UserResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add existing NetApp Cloud Central user to Cloud Manager.
----
POST /users/add-user
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#addportaluserrequest[AddPortalUserRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#userresponse[UserResponse]
|404|Either the provided tenant or role assigned to the new user does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Remove user from Cloud Manager.
----
DELETE /users/{userId}/remove-user
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|userId|Public Id of user|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Resets the password of the given user.
----
PUT /users/{userId}/reset-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|userId|Public Id of the user whose password is to be reset|true|string|
|BodyParameter|body|Reset password request|true|link:../cm/api_ref_definitions.html#resetuserpasswordrequest[ResetUserPasswordRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|403|The current user does not have permissions to perform this operation for the given user|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Grants or revokes permissions to the given user for performing operations over the given working environments.
----
POST /users/{userId}/working-environments-grant-revoke
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body||false|link:../cm/api_ref_definitions.html#grantpermission[GrantPermission]|
|PathParameter|userId|Public Id of the user whose permissions are to be changed|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|404|User with the given user id does not exist|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Vsa:aggregates
==== Adds disks to an existing aggregate
----
POST /vsa/aggregates/{workingEnvironmentId}/{aggregateName}/disks
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be updated|true|string|
|BodyParameter|body|Add disk to aggregate request|true|link:../cm/api_ref_definitions.html#adddiskstoaggregaterequest[AddDisksToAggregateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing aggregate
----
DELETE /vsa/aggregates/{workingEnvironmentId}/{aggregateName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|aggregateName|Name of aggregate to be deleted|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new aggregate
----
POST /vsa/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Create Aggregate Request|true|link:../cm/api_ref_definitions.html#vsaaggregatecreaterequest[VsaAggregateCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves aggregates
----
GET /vsa/aggregates
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Public Id of working environment|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#aggregateresponse[AggregateResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Vsa:discovery
==== Saves a previously discovered Cloud Volumes ONTAP working environment to the Cloud Manager database.
----
POST /vsa/recover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#recovervsarequest[RecoverVsaRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of discovered working environments visible to the current user in the specified AWS region.
----
GET /vsa/discover
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Region to discover working environments|true|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#discoveredvsaresponse[DiscoveredVsaResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Vsa:encryption
==== Updates the client certificate on the Cloud Volumes ONTAP system
----
POST /vsa/encryption/{workingEnvironmentId}/update-client-certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Adds a key manager to the Cloud Volumes ONTAP system
----
POST /vsa/encryption/{workingEnvironmentId}/key-managers/{keyManagerIp}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|keyManagerIp|Key manager IP address|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes a key manager from the Cloud Volumes ONTAP system
----
DELETE /vsa/encryption/{workingEnvironmentId}/key-managers/{keyManagerIp}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|PathParameter|keyManagerIp|Key manager IP address|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates the key manager CA certificate on the Cloud Volumes ONTAP system
----
POST /vsa/encryption/{workingEnvironmentId}/update-key-manager-ca-certificate
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Volumes ONTAP key manager CA certificate request parameters|true|link:../cm/api_ref_definitions.html#updatekeymanagercacertificaterequest[UpdateKeyManagerCaCertificateRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#certificateresponse[CertificateResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Vsa:metadata
==== Retrieve S3 buckets summary
----
GET /vsa/metadata/s3-summary
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3summary[S3Summary]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS user Key Pairs for specific region
----
GET /vsa/metadata/key-pairs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|string array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create new S3 bucket
----
POST /vsa/metadata/create-bucket
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|bucketName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves instance types not supporting acceleration and capacity tiering
----
GET /vsa/metadata/instance-types-not-supporting-acceleration-and-capacity-tiering
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instancetypesnotsupportingaccelerationandcapacitytieringresponse[InstanceTypesNotSupportingAccelerationAndCapacityTieringResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all the Tag names
----
GET /vsa/metadata/tag-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tagkeyresponse[TagKeyResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve S3 buckets policy status and tiering level
----
POST /vsa/metadata/get-buckets-application-info
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Request for retrieving Buckets Additional info|true|link:../cm/api_ref_definitions.html#bucketspolicyandtieringinforequest[BucketsPolicyAndTieringInfoRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#bucketadditionaldata[BucketAdditionalData] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported EBS volume types
----
GET /vsa/metadata/ebs-volume-types
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ebsvolumetype[EbsVolumeType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Manager manifests. Refer to the API Developers Guide in order to understand how to extract valid region codes, license types, instance types and Cloud Volumes ONTAP version parameters for the creation of a Cloud Volumes ONTAP working environment.
----
GET /vsa/metadata/manifests
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#metadataresponse[MetadataResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the minimum number of required IPs for a single Cloud Volumes ONTAP system, an HA node, and HA mediator
----
GET /vsa/metadata/network-requirements
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#networkrequirementsresponse[NetworkRequirementsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS instance profiles
----
GET /vsa/metadata/instance-profiles
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#instanceprofileresponse[InstanceProfileResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS user Key Pairs for all regions
----
GET /vsa/metadata/key-pairs-by-region
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#keypairsbyregionresponse[KeyPairsByRegionResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS encryption keys for specific region
----
GET /vsa/metadata/aws-encryption-keys
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awsencryptionkey[AwsEncryptionKey] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported features
----
GET /vsa/metadata/supported-features
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedfeaturesresponse[SupportedFeaturesResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Validates the current user is subscribed to Cloud Volumes ONTAP product in Amazon marketplace
----
POST /vsa/metadata/validate-subscribed-to-ontap-cloud
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Validate subscribed to Cloud Volumes ONTAP request|true|link:../cm/api_ref_definitions.html#awsvalidatesubscribedtoontapcloudrequest[AwsValidateSubscribedToOntapCloudRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#awsvalidatesubscribedtoontapcloudresponse[AwsValidateSubscribedToOntapCloudResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves default snapshot policies available on a cluster
----
GET /vsa/metadata/default-snapshot-policies
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotpolicy[SnapshotPolicy] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all S3 buckets with additional info
----
GET /vsa/metadata/get-buckets-details
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3bucketssummary[S3BucketsSummary]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves AWS regions over which an Cloud Volumes ONTAP working environment may be created
----
GET /vsa/metadata/regions
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#region[Region] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieve all S3 buckets
----
GET /vsa/metadata/buckets
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|tagsRequired||false|boolean|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#s3bucketinfo[S3BucketInfo] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves supported capacity tiers for EBS volume types
----
GET /vsa/metadata/supported-capacity-tiers
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|ontapVersion||true|string|
|QueryParameter|dataEncryptionType||true|string|
|QueryParameter|licenseType||true|string|
|QueryParameter|instanceType||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportedcapacitytiers[SupportedCapacityTiers]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves packages configuration
----
GET /vsa/metadata/packages
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#packageinforesponse[PackageInfoResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all Cloud Volumes ONTAP configurations.
----
GET /vsa/metadata/permutations
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region|Filter by region|false|string|
|QueryParameter|version|Filter by version|false|string|
|QueryParameter|license|Filter by license|false|string|
|QueryParameter|instance_type|Filter by instance type|false|string|
|QueryParameter|default_instance_type|Filter by default instance type|false|string|
|QueryParameter|feature|Filter by feature|false|string|
|QueryParameter|latest_only|Filter latest only|false|string|
|QueryParameter|ami|Filter by ami id|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#configuration[Configuration] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves VPCs
----
GET /vsa/metadata/vpcs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|region||true|string|
|QueryParameter|roleArn||false|string|
|QueryParameter|cloudProviderAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vpcextendedresponse[VpcExtendedResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Vsa:volumes
==== Quotes a new volume. Returns a resource quote needed to satisfy the requested volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/volumes/quote
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Quote volume request|true|link:../cm/api_ref_definitions.html#vsavolumequoterequest[VsaVolumeQuoteRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsavolumequoteresponse[VsaVolumeQuoteResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes for Backup Activation.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /vsa/volumes/volumes-for-backup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|QueryParameter|offset|offset|false|integer (int32)|
|QueryParameter|limit|limit|false|integer (int32)|
|QueryParameter|search|search|false|string|
|QueryParameter|filterBy|filterBy should be of the form field:value. For multiple filters use comma separator.|false|ref|
|QueryParameter|sortBy|sortBy should be of the form field:Asc or field:Desc. For multiple sorting use comma separator.|false|ref|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeslistforbackup[VolumesListForBackup]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotcreaterequest[SnapshotCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete snapshot manually.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshot
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body|Create snapshot request|true|link:../cm/api_ref_definitions.html#snapshotdeleterequest[SnapshotDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new volume. If the properties aggregateName and maxNumOfDisksApprovedToAdd are not filled in, then the response will fail with a suggested aggregate name and the number of disks that will need to be created in order to fulfill the request.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|createAggregateIfNotFound|On create volume request, allow creating not-found aggregate|false|boolean|
|BodyParameter|body|Create volume request|true|link:../cm/api_ref_definitions.html#vsavolumecreaterequest[VsaVolumeCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves volumes.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /vsa/volumes
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|workingEnvironmentId|Filter volumes by this working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#volumeresponse[VolumeResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Add ISCSI initiator.
----
POST /vsa/volumes/initiator
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|ISCSI initiator request|true|link:../cm/api_ref_definitions.html#initiator[Initiator]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all ISCSI initiators.
----
GET /vsa/volumes/initiator
----

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#initiatorentry[InitiatorEntry] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Clones an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/clone
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumeclonerequest[VolumeCloneRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change underlying volume tier.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/change-tier
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#changevolumetierrequest[ChangeVolumeTierRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Return a list of snapshot descriptions for the volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/snapshots
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#snapshotresponse[SnapshotResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Move an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}/move
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|BodyParameter|body||true|link:../cm/api_ref_definitions.html#volumemoverequest[VolumeMoveRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get all igroups.
----
GET /vsa/volumes/igroups/{workingEnvironmentId}/{svmName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#igroup[IGroup] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|ref|
|BodyParameter|body|Modify volume request|true|link:../cm/api_ref_definitions.html#volumemodifyrequest[VolumeModifyRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing volume.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /vsa/volumes/{workingEnvironmentId}/{svmName}/{volumeName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|PathParameter|svmName||true|string|
|PathParameter|volumeName||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Vsa:working-environments
==== Register extra capacity serials.
----
POST /vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|licenses serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity serials.
----
PUT /vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete extra capacity licenses by serials.
----
DELETE /vsa/working-environments/{workingEnvironmentId}/extra-capacity-serials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity serial(s)|true|link:../cm/api_ref_definitions.html#licensesserials[LicensesSerials]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Starts a specific Cloud Volumes ONTAP instance.Operation may only be performed on working environments whose status is: OFF
----
POST /vsa/working-environments/{workingEnvironmentId}/start
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS Configuration to an existing Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsconfigurationrequest[CIFSConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves CIFS Configuration to an existing Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /vsa/working-environments/{workingEnvironmentId}/cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|svm||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#cifsconfigurationresponse[CIFSConfigurationResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves action parameters used in create request of a given Cloud Volumes ONTAP instance.
----
GET /vsa/working-environments/{workingEnvironmentId}/create-request-parameters
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#createrequestparametersresponse[CreateRequestParametersResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Delete CIFS Configuration of an existing Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/delete-cifs
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsdeleterequest[CIFSDeleteRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== List start-stop schedules for Cloud Volumes ONTAP.
----
GET /vsa/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaschedule[VsaSchedule] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Set schedules for Cloud Volumes ONTAP.
----
PUT /vsa/working-environments/{workingEnvironmentId}/schedules
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Cloud Volumes ONTAP working environment update schedule request|true|link:../cm/api_ref_definitions.html#vsaschedulesrequest[VsaSchedulesRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves a list of versions to which this Cloud Volumes ONTAP can be upgraded.Operation may only be performed on working environments whose status is: ON
----
GET /vsa/working-environments/{workingEnvironmentId}/occm-provided-upgrade-versions
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#ontapupdateimagemetadata[OntapUpdateImageMetadata] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Disable FPolicy for ransomeware files.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /vsa/working-environments/{workingEnvironmentId}/disable-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Creates a new Cloud Volumes ONTAP working environment. Refer to the API Developers Guide in order to understand how to fill in the values for region, licenseType, instanceType and version.
----
POST /vsa/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|BodyParameter|body|Working environment|true|link:../cm/api_ref_definitions.html#createvsaworkingenvironmentrequest[CreateVSAWorkingEnvironmentRequest]|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves Cloud Volumes ONTAP working environments visible to the currently logged in user.
----
GET /vsa/working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|QueryParameter|tenantId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves images already installed on the Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /vsa/working-environments/{workingEnvironmentId}/ontap-available-images
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#updatelocalimage[UpdateLocalImage] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all license types and their associated instance types for a given Cloud Volumes ONTAP instance.
----
GET /vsa/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#licenseandinstancetype[LicenseAndInstanceType] array
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the instance type of a specific Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON, OFF
----
PUT /vsa/working-environments/{workingEnvironmentId}/license-instance-type
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Instance type modification request|true|link:../cm/api_ref_definitions.html#licenseandinstancetypemodificationrequest[LicenseAndInstanceTypeModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Create snapshot policy.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|BodyParameter|body|Create snapshot policy request|true|link:../cm/api_ref_definitions.html#snapshotpolicycreaterequest[SnapshotPolicyCreateRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Registers a Cloud Volumes ONTAP system with NetApp.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|nssAccountId||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves the support registration status of a Cloud Volumes ONTAP system.Operation may only be performed on working environments whose status is: ON
----
GET /vsa/working-environments/{workingEnvironmentId}/support-registration
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#supportregistrationresponse[SupportRegistrationResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Enable capacity tiering.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/{workingEnvironmentId}/enable-capacity-tiering
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Enable capacity tiering request|false|link:../cm/api_ref_definitions.html#enablecapacitytieringrequest[EnableCapacityTieringRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup NTP server.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/ntp
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|NTP Configuration request|true|link:../cm/api_ref_definitions.html#ntpconfigurationrequest[NTPConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Register extra capacity license.
----
POST /vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity licenses(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Get extra capacity licenses for cvo.
----
GET /vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Update extra capacity license.
----
PUT /vsa/working-environments/{workingEnvironmentId}/extra-capacity-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|extra capacity license(s)|true|link:../cm/api_ref_definitions.html#licensescontent[LicensesContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Stops a specific Cloud Volumes ONTAP instance.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/stop
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|takeSnapshots|Take snapshots before stopping Cloud Volumes ONTAP|true|boolean|true
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves an Cloud Volumes ONTAP working environment.
----
GET /vsa/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#vsaworkingenvironmentresponse[VsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Deletes an existing Cloud Volumes ONTAP working environment, including all Cloud resources created for this working environment (unless the localDelete flag is set to true).
----
DELETE /vsa/working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|localDelete|If true, the Cloud Volumes ONTAP instance is not terminated in Cloud, but Cloud Manager no longer manages the working environment.|false|boolean|false
|QueryParameter|forceDelete|If true, the working environment will be deleted even if it is part of one or more SnapMirror relationships.|false|boolean|false
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves editable tags for cloud resources of a given Cloud Volumes ONTAP instance.Operation may only be performed on working environments whose status is: ON, DEGRADED, OFF
----
GET /vsa/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#usertagsresponse[UserTagsResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify user tags for cloud resources of a given Cloud Volumes ONTAP instance.Operation may only be performed on working environments whose status is: ON, DEGRADED, OFF
----
PUT /vsa/working-environments/{workingEnvironmentId}/user-tags
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Modify user tags request|true|link:../cm/api_ref_definitions.html#modifyusertagsrequest[ModifyUserTagsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the writing speed for Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
PUT /vsa/working-environments/{workingEnvironmentId}/writing-speed
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Writing speed request|true|link:../cm/api_ref_definitions.html#writingspeedrequest[WritingSpeedRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate FPolicy for ransomeware files.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /vsa/working-environments/{workingEnvironmentId}/activate-fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Activate snapshot policy assignment to all not protected rw volumes.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /vsa/working-environments/{workingEnvironmentId}/activate-snapshot-policy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the svm name of the Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
PUT /vsa/working-environments/{workingEnvironmentId}/svm
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Svm name modification request|true|link:../cm/api_ref_definitions.html#svmnamemodificationrequest[SvmNameModificationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Sets the cluster password of a specific Cloud Volumes ONTAP.
----
PUT /vsa/working-environments/{workingEnvironmentId}/set-password
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|occmOnly||false|boolean|
|BodyParameter|body|Set password request|true|link:../cm/api_ref_definitions.html#passwordwrapper[PasswordWrapper]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Modify the net port broadcast domain mtu of the Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /vsa/working-environments/{workingEnvironmentId}/networkOptimization
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Use optimization|true|link:../cm/api_ref_definitions.html#changenetworkoptimizationrequest[ChangeNetworkOptimizationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates Cloud Manager password of a specific Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
PUT /vsa/working-environments/{workingEnvironmentId}/update-credentials
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update Cloud Manager password request|true|link:../cm/api_ref_definitions.html#updatecredentialsrequest[UpdateCredentialsRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change serial number of Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/{workingEnvironmentId}/change-serial
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change serial number request|true|link:../cm/api_ref_definitions.html#changeserialnumberrequest[ChangeSerialNumberRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Setup a new CIFS using workgroup configuration to an existing Cloud Volumes ONTAP working environment.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/cifs-workgroup
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|CIFS Configuration request|true|link:../cm/api_ref_definitions.html#cifsworkgroupconfigurationrequest[CIFSWorkgroupConfigurationRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Parses an uploaded Cloud license file.
----
POST /vsa/working-environments/parse-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#providedlicenseresponse[ProvidedLicenseResponse]
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Activate offbox configuration.Operation may only be performed on working environments whose status is: ON
----
PUT /vsa/working-environments/{workingEnvironmentId}/offbox
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Updates default vscan file operation profile. Profile on existing CIFS shares will change only on writes-only mode.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
PUT /vsa/working-environments/{workingEnvironmentId}/vscan-file-op
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Vscan file-operation Request|true|link:../cm/api_ref_definitions.html#vscanfileoprequest[VscanFileOpRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Change tier level.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
POST /vsa/working-environments/{workingEnvironmentId}/change-tier-level
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Change tier level request|true|link:../cm/api_ref_definitions.html#changetierlevelrequest[ChangeTierLevelRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Ontap Saving.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
GET /vsa/working-environments/{workingEnvironmentId}/ontap-saving
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentontapsavingresponse[WorkingEnvironmentOntapSavingResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file on the provided Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/{workingEnvironmentId}/upload-license-file
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|HeaderParameter|filename|Cloud license file name|false|string|
|BodyParameter|license|license|false|string|
|===

===== Consumes

* multipart/form-data

===== Produces

* application/json

==== Manually triggers subscription sync for all Cloud Volumes ONTAP working environments.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/sync-subscription
----

===== Consumes

* application/json

===== Produces

* application/json

==== Delete FPolicy for ransomeware files.Operation may only be performed on working environments whose status is: ON, DEGRADED
----
DELETE /vsa/working-environments/{workingEnvironmentId}/fpolicy
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId||true|string|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Working Environment Cost And Usage.
----
GET /vsa/working-environments/{workingEnvironmentId}/cost-and-usage
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|QueryParameter|start|cost and usage start period|false|string|
|QueryParameter|end|cost and usage end period|false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironmentcostandusageresponse[WorkingEnvironmentCostAndUsageResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves eligibility support status of a Cloud Volumes ONTAP system. Valid values - NSS_NOT_VALID, NOT_REGISTERED, IPA_PROBLEM, VALID, NSS_NOT_EXISTS, LICENSE_EXPIRED.Operation may only be performed on working environments whose status is: ON, UPDATING
----
GET /vsa/working-environments/{workingEnvironmentId}/update-eligibility
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|200|success|link:../cm/api_ref_definitions.html#eligibilityresponse[EligibilityResponse]
|400|Working Environment must be ON or UPDATING in order to check eligibility|No Content
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Performs a complete image update operation on the single node of the specified Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/{workingEnvironmentId}/update-image
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|Update system image request|true|link:../cm/api_ref_definitions.html#updatesystemimagerequest[UpdateSystemImageRequest]|
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Uploads a Cloud license file content on the provided Cloud Volumes ONTAP.Operation may only be performed on working environments whose status is: ON
----
POST /vsa/working-environments/{workingEnvironmentId}/upload-licenses
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentId|Public Id of working environment|true|string|
|BodyParameter|body|license file content request|true|link:../cm/api_ref_definitions.html#licensefilecontent[LicenseFileContent]|
|===

===== Consumes

* application/json

===== Produces

* application/json

=== Working-environments
==== Retrieves an Cloud Volumes ONTAP working environment.
----
GET /working-environments/{workingEnvironmentId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|fields||false|string|
|PathParameter|workingEnvironmentId||true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#genericvsaworkingenvironmentresponse[GenericVsaWorkingEnvironmentResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Returns true if working environment with that name already exists, false otherwise.
----
GET /working-environments/exists/{workingEnvironmentName}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|workingEnvironmentName|Working environment name|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|boolean
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Retrieves all working environments.
----
GET /working-environments
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|QueryParameter|tenantId|Filter working environments by tenantId. Required for Oncloud Admin if performing operation requesting specific fields|false|string|
|QueryParameter|fields||false|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#workingenvironments[WorkingEnvironments]
|===

===== Consumes

* application/json

===== Produces

* application/json

==== Returns all non prem working environment actions required in a given tenant.
----
GET /working-environments/actionRequired/{tenantId}
----

===== Parameters
[options="header"]
|===
|Type|Name|Description|Required|Schema|Default
|PathParameter|tenantId|Public Id of tenant|true|string|
|===

===== Responses
[options="header"]
|===
|HTTP Code|Description|Schema
|default|success|link:../cm/api_ref_definitions.html#tenantactionsrequiredresponse[TenantActionsRequiredResponse]
|===

===== Consumes

* application/json

===== Produces

* application/json
